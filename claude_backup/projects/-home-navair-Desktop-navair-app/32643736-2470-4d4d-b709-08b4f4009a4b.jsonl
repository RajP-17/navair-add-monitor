{"type":"summary","summary":"Claude Code CLI Initialization and Codebase Navigation Setup","leafUuid":"2dafe400-7ef9-4727-a138-bd45a7e36aec"}
{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":"Warmup"},"uuid":"78db018b-f054-4711-adff-86b6fbd5a632","timestamp":"2025-10-17T03:06:58.635Z"}
{"parentUuid":"78db018b-f054-4711-adff-86b6fbd5a632","isSidechain":true,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Pm3vc9rkixhn1P4nRpXCRc","type":"message","role":"assistant","content":[{"type":"text","text":"I'm ready to help you search and explore your codebase! I'm Claude Code, Anthropic's file search specialist.\n\nI'm equipped to:\n- **Search files** using glob patterns for broad file matching\n- **Search content** using powerful regex patterns with grep\n- **Read files** when you know the specific path\n- **Run file operations** like listing directories or copying files\n\nI'm currently in `/home/navair/Desktop/navair-app` and ready to assist with your search requests.\n\nWhat would you like me to find or explore in your codebase?"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":414,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":129,"service_tier":"standard"}},"requestId":"req_011CUC2qaYK8taFRkmpBcX9k","type":"assistant","uuid":"f96aa65f-f301-481a-ae03-182d2e8e4a50","timestamp":"2025-10-17T03:07:01.397Z"}
{"type":"file-history-snapshot","messageId":"cd4e3b31-3afb-4791-a672-2dc6eba11dcb","snapshot":{"messageId":"cd4e3b31-3afb-4791-a672-2dc6eba11dcb","trackedFileBackups":{},"timestamp":"2025-10-17T03:07:12.686Z"},"isSnapshotUpdate":false}
{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":"please continue working on the dashbaorf "},"uuid":"cd4e3b31-3afb-4791-a672-2dc6eba11dcb","timestamp":"2025-10-17T03:07:12.644Z","thinkingMetadata":{"level":"none","disabled":true,"triggers":[]}}
{"parentUuid":"cd4e3b31-3afb-4791-a672-2dc6eba11dcb","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YRpwh6itzPe17dy1r3BPzY","type":"message","role":"assistant","content":[{"type":"text","text":"I'll help you continue working on the dashboard. Let me first check what dashboard files exist in your project to understand the current state."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":2573,"cache_read_input_tokens":13121,"cache_creation":{"ephemeral_5m_input_tokens":2573,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"requestId":"req_011CUC2rahGAtxwhuVmReeEd","type":"assistant","uuid":"faef412a-b943-4868-84ab-33bdc6a9bf6b","timestamp":"2025-10-17T03:07:15.911Z"}
{"parentUuid":"faef412a-b943-4868-84ab-33bdc6a9bf6b","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YRpwh6itzPe17dy1r3BPzY","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011DYonk14N6MbgSdrPEb45r","name":"Glob","input":{"pattern":"**/*dashboard*"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":2573,"cache_read_input_tokens":13121,"cache_creation":{"ephemeral_5m_input_tokens":2573,"ephemeral_1h_input_tokens":0},"output_tokens":177,"service_tier":"standard"}},"requestId":"req_011CUC2rahGAtxwhuVmReeEd","type":"assistant","uuid":"9710c27a-f966-4dca-ba9d-8759ef7d443e","timestamp":"2025-10-17T03:07:17.065Z"}
{"parentUuid":"9710c27a-f966-4dca-ba9d-8759ef7d443e","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YRpwh6itzPe17dy1r3BPzY","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01CL5B444YxyuSf9UNPondxb","name":"Glob","input":{"pattern":"**/*Dashboard*"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":2573,"cache_read_input_tokens":13121,"cache_creation":{"ephemeral_5m_input_tokens":2573,"ephemeral_1h_input_tokens":0},"output_tokens":177,"service_tier":"standard"}},"requestId":"req_011CUC2rahGAtxwhuVmReeEd","type":"assistant","uuid":"443a4878-0cb5-4821-b5d8-7fbbf365904d","timestamp":"2025-10-17T03:07:17.181Z"}
{"parentUuid":"443a4878-0cb5-4821-b5d8-7fbbf365904d","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YRpwh6itzPe17dy1r3BPzY","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Tx7jfz7EncKsEphrCgYCNA","name":"Bash","input":{"command":"ls -la","description":"List directory contents"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":2573,"cache_read_input_tokens":13121,"cache_creation":{"ephemeral_5m_input_tokens":2573,"ephemeral_1h_input_tokens":0},"output_tokens":177,"service_tier":"standard"}},"requestId":"req_011CUC2rahGAtxwhuVmReeEd","type":"assistant","uuid":"cc054d9d-e851-4698-af81-92826774bf82","timestamp":"2025-10-17T03:07:17.329Z"}
{"parentUuid":"cc054d9d-e851-4698-af81-92826774bf82","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011DYonk14N6MbgSdrPEb45r","type":"tool_result","content":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/navair-dashboard.service\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/node_red/dashboard_config.json\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web/static/css/dashboard.css\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/simple_dashboard.html\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/navair-dashboard.service\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/node_red/dashboard_config.json\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js.backup\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web/static/css/dashboard.css\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/dashboard.js"}]},"uuid":"b1b16c13-a030-49ff-a184-273b3071f3cc","timestamp":"2025-10-17T03:07:19.355Z","toolUseResult":{"filenames":["/home/navair/Desktop/navair-app/Navair_Project/navair_additive/navair-dashboard.service","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/node_red/dashboard_config.json","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web/static/css/dashboard.css","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/simple_dashboard.html","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/navair-dashboard.service","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/node_red/dashboard_config.json","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js.backup","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web/static/css/dashboard.css","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/dashboard.js"],"durationMs":1411,"numFiles":10,"truncated":false}}
{"parentUuid":"b1b16c13-a030-49ff-a184-273b3071f3cc","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01CL5B444YxyuSf9UNPondxb","type":"tool_result","content":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/navair-dashboard.service\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/node_red/dashboard_config.json\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web/static/css/dashboard.css\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/simple_dashboard.html\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/navair-dashboard.service\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/node_red/dashboard_config.json\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js.backup\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js\n/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web/static/css/dashboard.css\n/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/dashboard.js"}]},"uuid":"e5141f25-1c1f-4140-8e95-a52900577c7e","timestamp":"2025-10-17T03:07:19.617Z","toolUseResult":{"filenames":["/home/navair/Desktop/navair-app/Navair_Project/navair_additive/navair-dashboard.service","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/node_red/dashboard_config.json","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web/static/css/dashboard.css","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/simple_dashboard.html","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/navair-dashboard.service","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/node_red/dashboard_config.json","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js.backup","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web_dashboard/dashboard.js","/home/navair/Desktop/navair-app/navair-fake-dash/Navair_Project/navair_additive/web/static/css/dashboard.css","/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/dashboard.js"],"durationMs":1654,"numFiles":10,"truncated":false}}
{"parentUuid":"e5141f25-1c1f-4140-8e95-a52900577c7e","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Tx7jfz7EncKsEphrCgYCNA","type":"tool_result","content":"total 1628\ndrwxrwxr-x 4 navair navair    4096 Oct 16 22:29 .\ndrwxrwxr-x 4 navair navair    4096 Oct 16 19:48 ..\ndrwxrwxr-x 3 navair navair    4096 Oct 16 21:50 navair-fake-dash\ndrwxrwxr-x 7 navair navair    4096 Oct 16 16:11 Navair_Project\n-rwxrwxr-x 1 navair navair   21026 Oct 16 19:40 setup_network.sh\n-rw-rw-r-- 1 navair navair 1611654 Oct 16 22:29 Swagger UI.pdf\n-rw-rw-r-- 1 navair navair    4877 Oct 16 22:27 SYSTEM_STATUS.md\n-rwxrwxr-x 1 navair navair    3607 Oct 16 22:21 test_all_endpoints.sh","is_error":false}]},"uuid":"c5488dc0-8212-4050-85ef-913e8140aa03","timestamp":"2025-10-17T03:07:19.796Z","toolUseResult":{"stdout":"total 1628\ndrwxrwxr-x 4 navair navair    4096 Oct 16 22:29 .\ndrwxrwxr-x 4 navair navair    4096 Oct 16 19:48 ..\ndrwxrwxr-x 3 navair navair    4096 Oct 16 21:50 navair-fake-dash\ndrwxrwxr-x 7 navair navair    4096 Oct 16 16:11 Navair_Project\n-rwxrwxr-x 1 navair navair   21026 Oct 16 19:40 setup_network.sh\n-rw-rw-r-- 1 navair navair 1611654 Oct 16 22:29 Swagger UI.pdf\n-rw-rw-r-- 1 navair navair    4877 Oct 16 22:27 SYSTEM_STATUS.md\n-rwxrwxr-x 1 navair navair    3607 Oct 16 22:21 test_all_endpoints.sh","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"c5488dc0-8212-4050-85ef-913e8140aa03","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01B2ZqAdnu7t3z1bC4qz6onL","type":"message","role":"assistant","content":[{"type":"text","text":"I can see you have dashboard files in your project. Let me check the main dashboard files to understand what we're working with:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1277,"cache_read_input_tokens":15694,"cache_creation":{"ephemeral_5m_input_tokens":1277,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CUC2s8P1NTdH3pbRatenB","type":"assistant","uuid":"8813a79c-3aff-4149-a10c-5b60c92aa1bd","timestamp":"2025-10-17T03:07:23.533Z"}
{"parentUuid":"8813a79c-3aff-4149-a10c-5b60c92aa1bd","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01B2ZqAdnu7t3z1bC4qz6onL","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01WzkjfQwgX1ruDMpaoDLXCt","name":"Read","input":{"file_path":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/simple_dashboard.html"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1277,"cache_read_input_tokens":15694,"cache_creation":{"ephemeral_5m_input_tokens":1277,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CUC2s8P1NTdH3pbRatenB","type":"assistant","uuid":"188bd884-6705-45e4-9089-7f0eee002378","timestamp":"2025-10-17T03:07:24.245Z"}
{"parentUuid":"188bd884-6705-45e4-9089-7f0eee002378","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01B2ZqAdnu7t3z1bC4qz6onL","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_015hsojDmaq7NCftBrgCbv3p","name":"Read","input":{"file_path":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/dashboard.js"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1277,"cache_read_input_tokens":15694,"cache_creation":{"ephemeral_5m_input_tokens":1277,"ephemeral_1h_input_tokens":0},"output_tokens":249,"service_tier":"standard"}},"requestId":"req_011CUC2s8P1NTdH3pbRatenB","type":"assistant","uuid":"2925f62d-ca94-4a2f-aee8-0d000ad0fd5a","timestamp":"2025-10-17T03:07:24.977Z"}
{"parentUuid":"2925f62d-ca94-4a2f-aee8-0d000ad0fd5a","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01B2ZqAdnu7t3z1bC4qz6onL","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01WkVtQgQeZzpFEFc4BxYHbQ","name":"Read","input":{"file_path":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web/static/css/dashboard.css"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1277,"cache_read_input_tokens":15694,"cache_creation":{"ephemeral_5m_input_tokens":1277,"ephemeral_1h_input_tokens":0},"output_tokens":249,"service_tier":"standard"}},"requestId":"req_011CUC2s8P1NTdH3pbRatenB","type":"assistant","uuid":"521c16fc-16a4-454b-80cd-e4043c2d28a4","timestamp":"2025-10-17T03:07:25.111Z"}
{"parentUuid":"521c16fc-16a4-454b-80cd-e4043c2d28a4","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01WzkjfQwgX1ruDMpaoDLXCt","type":"tool_result","content":"     1â†’<!DOCTYPE html>\n     2â†’<html lang=\"en\">\n     3â†’<head>\n     4â†’    <meta charset=\"UTF-8\">\n     5â†’    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n     6â†’    <title>NAVAIR Monitor - Simple Dashboard</title>\n     7â†’    <style>\n     8â†’        * {\n     9â†’            margin: 0;\n    10â†’            padding: 0;\n    11â†’            box-sizing: border-box;\n    12â†’        }\n    13â†’\n    14â†’        body {\n    15â†’            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    16â†’            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n    17â†’            color: #333;\n    18â†’            padding: 20px;\n    19â†’        }\n    20â†’\n    21â†’        .container {\n    22â†’            max-width: 1400px;\n    23â†’            margin: 0 auto;\n    24â†’        }\n    25â†’\n    26â†’        .header {\n    27â†’            background: rgba(255, 255, 255, 0.95);\n    28â†’            padding: 20px;\n    29â†’            border-radius: 10px;\n    30â†’            margin-bottom: 20px;\n    31â†’            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    32â†’        }\n    33â†’\n    34â†’        .header h1 {\n    35â†’            color: #2c3e50;\n    36â†’            font-size: 28px;\n    37â†’            margin-bottom: 5px;\n    38â†’        }\n    39â†’\n    40â†’        .status-badge {\n    41â†’            display: inline-block;\n    42â†’            padding: 5px 15px;\n    43â†’            border-radius: 20px;\n    44â†’            font-size: 14px;\n    45â†’            font-weight: bold;\n    46â†’            margin-top: 10px;\n    47â†’        }\n    48â†’\n    49â†’        .status-connected {\n    50â†’            background: #27ae60;\n    51â†’            color: white;\n    52â†’        }\n    53â†’\n    54â†’        .status-disconnected {\n    55â†’            background: #e74c3c;\n    56â†’            color: white;\n    57â†’        }\n    58â†’\n    59â†’        .grid {\n    60â†’            display: grid;\n    61â†’            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    62â†’            gap: 20px;\n    63â†’            margin-bottom: 20px;\n    64â†’        }\n    65â†’\n    66â†’        .card {\n    67â†’            background: rgba(255, 255, 255, 0.95);\n    68â†’            padding: 20px;\n    69â†’            border-radius: 10px;\n    70â†’            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    71â†’        }\n    72â†’\n    73â†’        .card h2 {\n    74â†’            color: #2c3e50;\n    75â†’            font-size: 20px;\n    76â†’            margin-bottom: 15px;\n    77â†’            border-bottom: 2px solid #3498db;\n    78â†’            padding-bottom: 10px;\n    79â†’        }\n    80â†’\n    81â†’        .data-row {\n    82â†’            display: flex;\n    83â†’            justify-content: space-between;\n    84â†’            padding: 10px 0;\n    85â†’            border-bottom: 1px solid #ecf0f1;\n    86â†’        }\n    87â†’\n    88â†’        .data-row:last-child {\n    89â†’            border-bottom: none;\n    90â†’        }\n    91â†’\n    92â†’        .data-label {\n    93â†’            color: #7f8c8d;\n    94â†’            font-weight: 500;\n    95â†’        }\n    96â†’\n    97â†’        .data-value {\n    98â†’            color: #2c3e50;\n    99â†’            font-weight: bold;\n   100â†’            font-size: 18px;\n   101â†’        }\n   102â†’\n   103â†’        .value-good { color: #27ae60; }\n   104â†’        .value-warning { color: #f39c12; }\n   105â†’        .value-critical { color: #e74c3c; }\n   106â†’\n   107â†’        .controls {\n   108â†’            display: flex;\n   109â†’            gap: 10px;\n   110â†’            margin-top: 15px;\n   111â†’        }\n   112â†’\n   113â†’        button {\n   114â†’            padding: 10px 20px;\n   115â†’            border: none;\n   116â†’            border-radius: 5px;\n   117â†’            font-size: 14px;\n   118â†’            font-weight: bold;\n   119â†’            cursor: pointer;\n   120â†’            transition: all 0.3s;\n   121â†’        }\n   122â†’\n   123â†’        .btn-primary {\n   124â†’            background: #3498db;\n   125â†’            color: white;\n   126â†’        }\n   127â†’\n   128â†’        .btn-primary:hover {\n   129â†’            background: #2980b9;\n   130â†’        }\n   131â†’\n   132â†’        .btn-danger {\n   133â†’            background: #e74c3c;\n   134â†’            color: white;\n   135â†’        }\n   136â†’\n   137â†’        .btn-danger:hover {\n   138â†’            background: #c0392b;\n   139â†’        }\n   140â†’\n   141â†’        .btn-success {\n   142â†’            background: #27ae60;\n   143â†’            color: white;\n   144â†’        }\n   145â†’\n   146â†’        .btn-success:hover {\n   147â†’            background: #229954;\n   148â†’        }\n   149â†’\n   150â†’        .loading {\n   151â†’            text-align: center;\n   152â†’            color: #7f8c8d;\n   153â†’            font-style: italic;\n   154â†’        }\n   155â†’\n   156â†’        #debugInfo {\n   157â†’            background: #2c3e50;\n   158â†’            color: #ecf0f1;\n   159â†’            padding: 15px;\n   160â†’            border-radius: 10px;\n   161â†’            font-family: 'Courier New', monospace;\n   162â†’            font-size: 12px;\n   163â†’            max-height: 300px;\n   164â†’            overflow-y: auto;\n   165â†’            margin-top: 20px;\n   166â†’        }\n   167â†’\n   168â†’        .log-entry {\n   169â†’            margin: 5px 0;\n   170â†’            padding: 5px;\n   171â†’            border-left: 3px solid #3498db;\n   172â†’            padding-left: 10px;\n   173â†’        }\n   174â†’\n   175â†’        .log-error {\n   176â†’            border-left-color: #e74c3c;\n   177â†’            color: #e74c3c;\n   178â†’        }\n   179â†’\n   180â†’        .log-success {\n   181â†’            border-left-color: #27ae60;\n   182â†’            color: #27ae60;\n   183â†’        }\n   184â†’    </style>\n   185â†’</head>\n   186â†’<body>\n   187â†’    <div class=\"container\">\n   188â†’        <div class=\"header\">\n   189â†’            <h1>NAVAIR Additive Manufacturing Monitor</h1>\n   190â†’            <div>\n   191â†’                <span id=\"apiStatus\" class=\"status-badge status-disconnected\">API: Disconnected</span>\n   192â†’                <span id=\"printerStatus\" class=\"status-badge status-disconnected\">Printer: Disconnected</span>\n   193â†’            </div>\n   194â†’        </div>\n   195â†’\n   196â†’        <div class=\"grid\">\n   197â†’            <!-- Printer Status Card -->\n   198â†’            <div class=\"card\">\n   199â†’                <h2>ğŸ–¨ï¸ Printer Status</h2>\n   200â†’                <div class=\"data-row\">\n   201â†’                    <span class=\"data-label\">State:</span>\n   202â†’                    <span class=\"data-value\" id=\"printState\">--</span>\n   203â†’                </div>\n   204â†’                <div class=\"data-row\">\n   205â†’                    <span class=\"data-label\">Job Name:</span>\n   206â†’                    <span class=\"data-value\" id=\"jobName\">--</span>\n   207â†’                </div>\n   208â†’                <div class=\"data-row\">\n   209â†’                    <span class=\"data-label\">Progress:</span>\n   210â†’                    <span class=\"data-value\" id=\"progress\">--</span>\n   211â†’                </div>\n   212â†’                <div class=\"data-row\">\n   213â†’                    <span class=\"data-label\">Time Elapsed:</span>\n   214â†’                    <span class=\"data-value\" id=\"timeElapsed\">--</span>\n   215â†’                </div>\n   216â†’                <div class=\"controls\">\n   217â†’                    <button class=\"btn-danger\" onclick=\"emergencyStop()\">ğŸ›‘ Emergency Stop</button>\n   218â†’                    <button class=\"btn-primary\" onclick=\"pauseResume()\">â¸ï¸ Pause/Resume</button>\n   219â†’                </div>\n   220â†’            </div>\n   221â†’\n   222â†’            <!-- Temperature Card -->\n   223â†’            <div class=\"card\">\n   224â†’                <h2>ğŸŒ¡ï¸ Temperature</h2>\n   225â†’                <div class=\"data-row\">\n   226â†’                    <span class=\"data-label\">Nozzle:</span>\n   227â†’                    <span class=\"data-value\" id=\"nozzleTemp\">--</span>\n   228â†’                </div>\n   229â†’                <div class=\"data-row\">\n   230â†’                    <span class=\"data-label\">Bed:</span>\n   231â†’                    <span class=\"data-value\" id=\"bedTemp\">--</span>\n   232â†’                </div>\n   233â†’                <div class=\"data-row\">\n   234â†’                    <span class=\"data-label\">Ambient:</span>\n   235â†’                    <span class=\"data-value\" id=\"ambientTemp\">--</span>\n   236â†’                </div>\n   237â†’            </div>\n   238â†’\n   239â†’            <!-- Environmental Card -->\n   240â†’            <div class=\"card\">\n   241â†’                <h2>ğŸŒ Environment</h2>\n   242â†’                <div class=\"data-row\">\n   243â†’                    <span class=\"data-label\">Humidity:</span>\n   244â†’                    <span class=\"data-value\" id=\"humidity\">--</span>\n   245â†’                </div>\n   246â†’                <div class=\"data-row\">\n   247â†’                    <span class=\"data-label\">Pressure:</span>\n   248â†’                    <span class=\"data-value\" id=\"pressure\">--</span>\n   249â†’                </div>\n   250â†’            </div>\n   251â†’\n   252â†’            <!-- Vibration Card -->\n   253â†’            <div class=\"card\">\n   254â†’                <h2>ğŸ“Š Vibration</h2>\n   255â†’                <div class=\"data-row\">\n   256â†’                    <span class=\"data-label\">Bed Vibration:</span>\n   257â†’                    <span class=\"data-value\" id=\"bedVibration\">--</span>\n   258â†’                </div>\n   259â†’                <div class=\"data-row\">\n   260â†’                    <span class=\"data-label\">Body Vibration:</span>\n   261â†’                    <span class=\"data-value\" id=\"bodyVibration\">--</span>\n   262â†’                </div>\n   263â†’            </div>\n   264â†’\n   265â†’            <!-- System Health Card -->\n   266â†’            <div class=\"card\">\n   267â†’                <h2>ğŸ’» System Health</h2>\n   268â†’                <div class=\"data-row\">\n   269â†’                    <span class=\"data-label\">CPU Usage:</span>\n   270â†’                    <span class=\"data-value\" id=\"cpuUsage\">--</span>\n   271â†’                </div>\n   272â†’                <div class=\"data-row\">\n   273â†’                    <span class=\"data-label\">Memory:</span>\n   274â†’                    <span class=\"data-value\" id=\"memoryUsage\">--</span>\n   275â†’                </div>\n   276â†’                <div class=\"data-row\">\n   277â†’                    <span class=\"data-label\">Temperature:</span>\n   278â†’                    <span class=\"data-value\" id=\"systemTemp\">--</span>\n   279â†’                </div>\n   280â†’                <div class=\"controls\">\n   281â†’                    <button class=\"btn-success\" onclick=\"calibrateSensors()\">ğŸ”§ Calibrate</button>\n   282â†’                    <button class=\"btn-primary\" onclick=\"exportData()\">ğŸ“¥ Export Data</button>\n   283â†’                </div>\n   284â†’            </div>\n   285â†’\n   286â†’            <!-- Quick Stats Card -->\n   287â†’            <div class=\"card\">\n   288â†’                <h2>ğŸ“ˆ Quick Stats</h2>\n   289â†’                <div class=\"data-row\">\n   290â†’                    <span class=\"data-label\">Sensors Connected:</span>\n   291â†’                    <span class=\"data-value\" id=\"sensorsConnected\">--</span>\n   292â†’                </div>\n   293â†’                <div class=\"data-row\">\n   294â†’                    <span class=\"data-label\">Database Status:</span>\n   295â†’                    <span class=\"data-value\" id=\"dbStatus\">--</span>\n   296â†’                </div>\n   297â†’                <div class=\"data-row\">\n   298â†’                    <span class=\"data-label\">Last Update:</span>\n   299â†’                    <span class=\"data-value\" id=\"lastUpdate\">--</span>\n   300â†’                </div>\n   301â†’            </div>\n   302â†’        </div>\n   303â†’\n   304â†’        <!-- Debug Console -->\n   305â†’        <div class=\"card\">\n   306â†’            <h2>ğŸ” Debug Console</h2>\n   307â†’            <div id=\"debugInfo\"></div>\n   308â†’        </div>\n   309â†’    </div>\n   310â†’\n   311â†’    <script>\n   312â†’        // Configuration\n   313â†’        const hostname = window.location.hostname;\n   314â†’        const API_BASE_URL = (hostname === 'localhost' || hostname === '127.0.0.1')\n   315â†’            ? 'http://localhost:8000/api'\n   316â†’            : `http://${hostname}:8000/api`;\n   317â†’\n   318â†’        let updateInterval;\n   319â†’        const UPDATE_RATE = 2000; // 2 seconds\n   320â†’\n   321â†’        // Debug logging\n   322â†’        function log(message, type = 'info') {\n   323â†’            const debugDiv = document.getElementById('debugInfo');\n   324â†’            const timestamp = new Date().toLocaleTimeString();\n   325â†’            const className = type === 'error' ? 'log-error' : type === 'success' ? 'log-success' : '';\n   326â†’            debugDiv.innerHTML = `<div class=\"log-entry ${className}\">[${timestamp}] ${message}</div>` + debugDiv.innerHTML;\n   327â†’\n   328â†’            // Keep only last 50 entries\n   329â†’            const entries = debugDiv.querySelectorAll('.log-entry');\n   330â†’            if (entries.length > 50) {\n   331â†’                entries[entries.length - 1].remove();\n   332â†’            }\n   333â†’        }\n   334â†’\n   335â†’        // Update element helper\n   336â†’        function updateElement(id, value, colorClass = '') {\n   337â†’            const element = document.getElementById(id);\n   338â†’            if (element) {\n   339â†’                element.textContent = value;\n   340â†’                if (colorClass) {\n   341â†’                    element.className = 'data-value ' + colorClass;\n   342â†’                }\n   343â†’            }\n   344â†’        }\n   345â†’\n   346â†’        // Fetch API health\n   347â†’        async function fetchHealth() {\n   348â†’            try {\n   349â†’                const response = await fetch(`${API_BASE_URL}/health`);\n   350â†’                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n   351â†’\n   352â†’                const data = await response.json();\n   353â†’\n   354â†’                updateElement('apiStatus', 'API: Connected');\n   355â†’                document.getElementById('apiStatus').className = 'status-badge status-connected';\n   356â†’\n   357â†’                if (data.system_metrics) {\n   358â†’                    updateElement('cpuUsage', `${data.system_metrics.cpu_percent.toFixed(1)}%`);\n   359â†’                    updateElement('memoryUsage', `${data.system_metrics.memory_percent.toFixed(1)}%`);\n   360â†’                    updateElement('systemTemp', `${data.system_metrics.temperature.toFixed(1)}Â°C`);\n   361â†’                }\n   362â†’\n   363â†’                log('API health check successful', 'success');\n   364â†’                return true;\n   365â†’\n   366â†’            } catch (error) {\n   367â†’                updateElement('apiStatus', 'API: Disconnected');\n   368â†’                document.getElementById('apiStatus').className = 'status-badge status-disconnected';\n   369â†’                log(`API health check failed: ${error.message}`, 'error');\n   370â†’                return false;\n   371â†’            }\n   372â†’        }\n   373â†’\n   374â†’        // Fetch sensor data\n   375â†’        async function fetchSensors() {\n   376â†’            try {\n   377â†’                const response = await fetch(`${API_BASE_URL}/sensors/current`);\n   378â†’                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n   379â†’\n   380â†’                const data = await response.json();\n   381â†’                log('Sensor data received', 'success');\n   382â†’\n   383â†’                if (data.readings) {\n   384â†’                    let connectedCount = 0;\n   385â†’\n   386â†’                    // Process each sensor\n   387â†’                    Object.keys(data.readings).forEach(sensorId => {\n   388â†’                        const sensor = data.readings[sensorId];\n   389â†’                        if (sensor.status !== 'disconnected' && sensor.status !== 'error') {\n   390â†’                            connectedCount++;\n   391â†’                        }\n   392â†’                    });\n   393â†’\n   394â†’                    updateElement('sensorsConnected', `${connectedCount}/${Object.keys(data.readings).length}`);\n   395â†’\n   396â†’                    // Temperature from printer\n   397â†’                    const printerTemp = data.readings.printer_temp;\n   398â†’                    if (printerTemp && printerTemp.value) {\n   399â†’                        if (printerTemp.value.nozzle !== undefined) {\n   400â†’                            updateElement('nozzleTemp', `${printerTemp.value.nozzle.toFixed(1)}Â°C`);\n   401â†’                        }\n   402â†’                        if (printerTemp.value.bed !== undefined) {\n   403â†’                            updateElement('bedTemp', `${printerTemp.value.bed.toFixed(1)}Â°C`);\n   404â†’                        }\n   405â†’                    }\n   406â†’\n   407â†’                    // Environmental data from BME280\n   408â†’                    const bme280 = data.readings.bme280_main;\n   409â†’                    if (bme280 && bme280.value) {\n   410â†’                        if (bme280.value.temperature !== undefined) {\n   411â†’                            updateElement('ambientTemp', `${bme280.value.temperature.toFixed(1)}Â°C`);\n   412â†’                        }\n   413â†’                        if (bme280.value.humidity !== undefined) {\n   414â†’                            updateElement('humidity', `${bme280.value.humidity.toFixed(1)}%`);\n   415â†’                        }\n   416â†’                        if (bme280.value.pressure !== undefined) {\n   417â†’                            updateElement('pressure', `${bme280.value.pressure.toFixed(1)} hPa`);\n   418â†’                        }\n   419â†’                    }\n   420â†’\n   421â†’                    // Vibration data\n   422â†’                    const bedVib = data.readings.mpu6050_bed;\n   423â†’                    if (bedVib && bedVib.value) {\n   424â†’                        updateElement('bedVibration', `${Math.abs(bedVib.value).toFixed(2)} mm/sÂ²`);\n   425â†’                    }\n   426â†’\n   427â†’                    const bodyVib = data.readings.mpu6050_body;\n   428â†’                    if (bodyVib && bodyVib.value) {\n   429â†’                        updateElement('bodyVibration', `${Math.abs(bodyVib.value).toFixed(2)} mm/sÂ²`);\n   430â†’                    }\n   431â†’                }\n   432â†’\n   433â†’            } catch (error) {\n   434â†’                log(`Sensor fetch failed: ${error.message}`, 'error');\n   435â†’            }\n   436â†’        }\n   437â†’\n   438â†’        // Fetch print status\n   439â†’        async function fetchPrintStatus() {\n   440â†’            try {\n   441â†’                const response = await fetch(`${API_BASE_URL}/print/status`);\n   442â†’                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n   443â†’\n   444â†’                const data = await response.json();\n   445â†’                log('Print status received', 'success');\n   446â†’\n   447â†’                updateElement('printState', data.state || 'offline');\n   448â†’                updateElement('jobName', data.job_name || 'No job');\n   449â†’                updateElement('progress', `${(data.progress || 0).toFixed(1)}%`);\n   450â†’\n   451â†’                if (data.time_elapsed) {\n   452â†’                    const minutes = Math.floor(data.time_elapsed / 60);\n   453â†’                    const seconds = data.time_elapsed % 60;\n   454â†’                    updateElement('timeElapsed', `${minutes}m ${seconds}s`);\n   455â†’                }\n   456â†’\n   457â†’                if (data.state !== 'offline') {\n   458â†’                    document.getElementById('printerStatus').className = 'status-badge status-connected';\n   459â†’                    document.getElementById('printerStatus').textContent = 'Printer: Connected';\n   460â†’                } else {\n   461â†’                    document.getElementById('printerStatus').className = 'status-badge status-disconnected';\n   462â†’                    document.getElementById('printerStatus').textContent = 'Printer: Offline';\n   463â†’                }\n   464â†’\n   465â†’            } catch (error) {\n   466â†’                log(`Print status fetch failed: ${error.message}`, 'error');\n   467â†’                document.getElementById('printerStatus').className = 'status-badge status-disconnected';\n   468â†’            }\n   469â†’        }\n   470â†’\n   471â†’        // Fetch system health\n   472â†’        async function fetchSystemHealth() {\n   473â†’            try {\n   474â†’                const response = await fetch(`${API_BASE_URL}/system/health`);\n   475â†’                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n   476â†’\n   477â†’                const data = await response.json();\n   478â†’\n   479â†’                if (data.components && data.components.database) {\n   480â†’                    const dbStatus = data.components.database.status;\n   481â†’                    updateElement('dbStatus', dbStatus === 'healthy' ? 'âœ“ Connected' : 'âœ— Error',\n   482â†’                                  dbStatus === 'healthy' ? 'value-good' : 'value-critical');\n   483â†’                }\n   484â†’\n   485â†’            } catch (error) {\n   486â†’                log(`System health fetch failed: ${error.message}`, 'error');\n   487â†’            }\n   488â†’        }\n   489â†’\n   490â†’        // Update all data\n   491â†’        async function updateAll() {\n   492â†’            updateElement('lastUpdate', new Date().toLocaleTimeString());\n   493â†’            await fetchHealth();\n   494â†’            await fetchSensors();\n   495â†’            await fetchPrintStatus();\n   496â†’            await fetchSystemHealth();\n   497â†’        }\n   498â†’\n   499â†’        // Control functions\n   500â†’        async function emergencyStop() {\n   501â†’            if (!confirm('Are you sure you want to emergency stop the printer?')) return;\n   502â†’\n   503â†’            try {\n   504â†’                const response = await fetch(`${API_BASE_URL}/controls/emergency_stop`, {\n   505â†’                    method: 'POST',\n   506â†’                    headers: { 'Content-Type': 'application/json' }\n   507â†’                });\n   508â†’\n   509â†’                if (response.ok) {\n   510â†’                    log('Emergency stop activated!', 'success');\n   511â†’                    alert('Emergency stop activated!');\n   512â†’                } else {\n   513â†’                    log('Emergency stop failed', 'error');\n   514â†’                    alert('Emergency stop failed!');\n   515â†’                }\n   516â†’            } catch (error) {\n   517â†’                log(`Emergency stop error: ${error.message}`, 'error');\n   518â†’                alert('Error: ' + error.message);\n   519â†’            }\n   520â†’        }\n   521â†’\n   522â†’        async function pauseResume() {\n   523â†’            try {\n   524â†’                const response = await fetch(`${API_BASE_URL}/controls/pause_resume`, {\n   525â†’                    method: 'POST',\n   526â†’                    headers: { 'Content-Type': 'application/json' }\n   527â†’                });\n   528â†’\n   529â†’                if (response.ok) {\n   530â†’                    const data = await response.json();\n   531â†’                    log('Print pause/resume toggled', 'success');\n   532â†’                    alert(data.message || 'Print pause/resume toggled');\n   533â†’                } else {\n   534â†’                    log('Pause/resume failed', 'error');\n   535â†’                }\n   536â†’            } catch (error) {\n   537â†’                log(`Pause/resume error: ${error.message}`, 'error');\n   538â†’                alert('Error: ' + error.message);\n   539â†’            }\n   540â†’        }\n   541â†’\n   542â†’        async function calibrateSensors() {\n   543â†’            if (!confirm('Start sensor calibration?')) return;\n   544â†’\n   545â†’            try {\n   546â†’                const response = await fetch(`${API_BASE_URL}/controls/calibrate`, {\n   547â†’                    method: 'POST',\n   548â†’                    headers: { 'Content-Type': 'application/json' }\n   549â†’                });\n   550â†’\n   551â†’                if (response.ok) {\n   552â†’                    log('Sensor calibration started', 'success');\n   553â†’                    alert('Sensor calibration started!');\n   554â†’                } else {\n   555â†’                    log('Calibration failed', 'error');\n   556â†’                }\n   557â†’            } catch (error) {\n   558â†’                log(`Calibration error: ${error.message}`, 'error');\n   559â†’                alert('Error: ' + error.message);\n   560â†’            }\n   561â†’        }\n   562â†’\n   563â†’        async function exportData() {\n   564â†’            try {\n   565â†’                const response = await fetch(`${API_BASE_URL}/data/export`);\n   566â†’                if (response.ok) {\n   567â†’                    const data = await response.json();\n   568â†’                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n   569â†’                    const url = URL.createObjectURL(blob);\n   570â†’                    const a = document.createElement('a');\n   571â†’                    a.href = url;\n   572â†’                    a.download = `navair_export_${new Date().toISOString()}.json`;\n   573â†’                    a.click();\n   574â†’                    log('Data exported successfully', 'success');\n   575â†’                } else {\n   576â†’                    log('Data export failed', 'error');\n   577â†’                }\n   578â†’            } catch (error) {\n   579â†’                log(`Export error: ${error.message}`, 'error');\n   580â†’                alert('Error: ' + error.message);\n   581â†’            }\n   582â†’        }\n   583â†’\n   584â†’        // Initialize\n   585â†’        log(`Initializing dashboard...`);\n   586â†’        log(`API URL: ${API_BASE_URL}`);\n   587â†’\n   588â†’        // Start updates\n   589â†’        updateAll();\n   590â†’        updateInterval = setInterval(updateAll, UPDATE_RATE);\n   591â†’\n   592â†’        log('Dashboard started - updating every 2 seconds', 'success');\n   593â†’    </script>\n   594â†’</body>\n   595â†’</html>\n   596â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"0cf39e81-f8da-49f3-a98c-3c3bb90639fb","timestamp":"2025-10-17T03:07:26.713Z","toolUseResult":{"type":"text","file":{"filePath":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/simple_dashboard.html","content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>NAVAIR Monitor - Simple Dashboard</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n            color: #333;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            background: rgba(255, 255, 255, 0.95);\n            padding: 20px;\n            border-radius: 10px;\n            margin-bottom: 20px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        }\n\n        .header h1 {\n            color: #2c3e50;\n            font-size: 28px;\n            margin-bottom: 5px;\n        }\n\n        .status-badge {\n            display: inline-block;\n            padding: 5px 15px;\n            border-radius: 20px;\n            font-size: 14px;\n            font-weight: bold;\n            margin-top: 10px;\n        }\n\n        .status-connected {\n            background: #27ae60;\n            color: white;\n        }\n\n        .status-disconnected {\n            background: #e74c3c;\n            color: white;\n        }\n\n        .grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 20px;\n            margin-bottom: 20px;\n        }\n\n        .card {\n            background: rgba(255, 255, 255, 0.95);\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        }\n\n        .card h2 {\n            color: #2c3e50;\n            font-size: 20px;\n            margin-bottom: 15px;\n            border-bottom: 2px solid #3498db;\n            padding-bottom: 10px;\n        }\n\n        .data-row {\n            display: flex;\n            justify-content: space-between;\n            padding: 10px 0;\n            border-bottom: 1px solid #ecf0f1;\n        }\n\n        .data-row:last-child {\n            border-bottom: none;\n        }\n\n        .data-label {\n            color: #7f8c8d;\n            font-weight: 500;\n        }\n\n        .data-value {\n            color: #2c3e50;\n            font-weight: bold;\n            font-size: 18px;\n        }\n\n        .value-good { color: #27ae60; }\n        .value-warning { color: #f39c12; }\n        .value-critical { color: #e74c3c; }\n\n        .controls {\n            display: flex;\n            gap: 10px;\n            margin-top: 15px;\n        }\n\n        button {\n            padding: 10px 20px;\n            border: none;\n            border-radius: 5px;\n            font-size: 14px;\n            font-weight: bold;\n            cursor: pointer;\n            transition: all 0.3s;\n        }\n\n        .btn-primary {\n            background: #3498db;\n            color: white;\n        }\n\n        .btn-primary:hover {\n            background: #2980b9;\n        }\n\n        .btn-danger {\n            background: #e74c3c;\n            color: white;\n        }\n\n        .btn-danger:hover {\n            background: #c0392b;\n        }\n\n        .btn-success {\n            background: #27ae60;\n            color: white;\n        }\n\n        .btn-success:hover {\n            background: #229954;\n        }\n\n        .loading {\n            text-align: center;\n            color: #7f8c8d;\n            font-style: italic;\n        }\n\n        #debugInfo {\n            background: #2c3e50;\n            color: #ecf0f1;\n            padding: 15px;\n            border-radius: 10px;\n            font-family: 'Courier New', monospace;\n            font-size: 12px;\n            max-height: 300px;\n            overflow-y: auto;\n            margin-top: 20px;\n        }\n\n        .log-entry {\n            margin: 5px 0;\n            padding: 5px;\n            border-left: 3px solid #3498db;\n            padding-left: 10px;\n        }\n\n        .log-error {\n            border-left-color: #e74c3c;\n            color: #e74c3c;\n        }\n\n        .log-success {\n            border-left-color: #27ae60;\n            color: #27ae60;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>NAVAIR Additive Manufacturing Monitor</h1>\n            <div>\n                <span id=\"apiStatus\" class=\"status-badge status-disconnected\">API: Disconnected</span>\n                <span id=\"printerStatus\" class=\"status-badge status-disconnected\">Printer: Disconnected</span>\n            </div>\n        </div>\n\n        <div class=\"grid\">\n            <!-- Printer Status Card -->\n            <div class=\"card\">\n                <h2>ğŸ–¨ï¸ Printer Status</h2>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">State:</span>\n                    <span class=\"data-value\" id=\"printState\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Job Name:</span>\n                    <span class=\"data-value\" id=\"jobName\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Progress:</span>\n                    <span class=\"data-value\" id=\"progress\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Time Elapsed:</span>\n                    <span class=\"data-value\" id=\"timeElapsed\">--</span>\n                </div>\n                <div class=\"controls\">\n                    <button class=\"btn-danger\" onclick=\"emergencyStop()\">ğŸ›‘ Emergency Stop</button>\n                    <button class=\"btn-primary\" onclick=\"pauseResume()\">â¸ï¸ Pause/Resume</button>\n                </div>\n            </div>\n\n            <!-- Temperature Card -->\n            <div class=\"card\">\n                <h2>ğŸŒ¡ï¸ Temperature</h2>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Nozzle:</span>\n                    <span class=\"data-value\" id=\"nozzleTemp\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Bed:</span>\n                    <span class=\"data-value\" id=\"bedTemp\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Ambient:</span>\n                    <span class=\"data-value\" id=\"ambientTemp\">--</span>\n                </div>\n            </div>\n\n            <!-- Environmental Card -->\n            <div class=\"card\">\n                <h2>ğŸŒ Environment</h2>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Humidity:</span>\n                    <span class=\"data-value\" id=\"humidity\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Pressure:</span>\n                    <span class=\"data-value\" id=\"pressure\">--</span>\n                </div>\n            </div>\n\n            <!-- Vibration Card -->\n            <div class=\"card\">\n                <h2>ğŸ“Š Vibration</h2>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Bed Vibration:</span>\n                    <span class=\"data-value\" id=\"bedVibration\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Body Vibration:</span>\n                    <span class=\"data-value\" id=\"bodyVibration\">--</span>\n                </div>\n            </div>\n\n            <!-- System Health Card -->\n            <div class=\"card\">\n                <h2>ğŸ’» System Health</h2>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">CPU Usage:</span>\n                    <span class=\"data-value\" id=\"cpuUsage\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Memory:</span>\n                    <span class=\"data-value\" id=\"memoryUsage\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Temperature:</span>\n                    <span class=\"data-value\" id=\"systemTemp\">--</span>\n                </div>\n                <div class=\"controls\">\n                    <button class=\"btn-success\" onclick=\"calibrateSensors()\">ğŸ”§ Calibrate</button>\n                    <button class=\"btn-primary\" onclick=\"exportData()\">ğŸ“¥ Export Data</button>\n                </div>\n            </div>\n\n            <!-- Quick Stats Card -->\n            <div class=\"card\">\n                <h2>ğŸ“ˆ Quick Stats</h2>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Sensors Connected:</span>\n                    <span class=\"data-value\" id=\"sensorsConnected\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Database Status:</span>\n                    <span class=\"data-value\" id=\"dbStatus\">--</span>\n                </div>\n                <div class=\"data-row\">\n                    <span class=\"data-label\">Last Update:</span>\n                    <span class=\"data-value\" id=\"lastUpdate\">--</span>\n                </div>\n            </div>\n        </div>\n\n        <!-- Debug Console -->\n        <div class=\"card\">\n            <h2>ğŸ” Debug Console</h2>\n            <div id=\"debugInfo\"></div>\n        </div>\n    </div>\n\n    <script>\n        // Configuration\n        const hostname = window.location.hostname;\n        const API_BASE_URL = (hostname === 'localhost' || hostname === '127.0.0.1')\n            ? 'http://localhost:8000/api'\n            : `http://${hostname}:8000/api`;\n\n        let updateInterval;\n        const UPDATE_RATE = 2000; // 2 seconds\n\n        // Debug logging\n        function log(message, type = 'info') {\n            const debugDiv = document.getElementById('debugInfo');\n            const timestamp = new Date().toLocaleTimeString();\n            const className = type === 'error' ? 'log-error' : type === 'success' ? 'log-success' : '';\n            debugDiv.innerHTML = `<div class=\"log-entry ${className}\">[${timestamp}] ${message}</div>` + debugDiv.innerHTML;\n\n            // Keep only last 50 entries\n            const entries = debugDiv.querySelectorAll('.log-entry');\n            if (entries.length > 50) {\n                entries[entries.length - 1].remove();\n            }\n        }\n\n        // Update element helper\n        function updateElement(id, value, colorClass = '') {\n            const element = document.getElementById(id);\n            if (element) {\n                element.textContent = value;\n                if (colorClass) {\n                    element.className = 'data-value ' + colorClass;\n                }\n            }\n        }\n\n        // Fetch API health\n        async function fetchHealth() {\n            try {\n                const response = await fetch(`${API_BASE_URL}/health`);\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                const data = await response.json();\n\n                updateElement('apiStatus', 'API: Connected');\n                document.getElementById('apiStatus').className = 'status-badge status-connected';\n\n                if (data.system_metrics) {\n                    updateElement('cpuUsage', `${data.system_metrics.cpu_percent.toFixed(1)}%`);\n                    updateElement('memoryUsage', `${data.system_metrics.memory_percent.toFixed(1)}%`);\n                    updateElement('systemTemp', `${data.system_metrics.temperature.toFixed(1)}Â°C`);\n                }\n\n                log('API health check successful', 'success');\n                return true;\n\n            } catch (error) {\n                updateElement('apiStatus', 'API: Disconnected');\n                document.getElementById('apiStatus').className = 'status-badge status-disconnected';\n                log(`API health check failed: ${error.message}`, 'error');\n                return false;\n            }\n        }\n\n        // Fetch sensor data\n        async function fetchSensors() {\n            try {\n                const response = await fetch(`${API_BASE_URL}/sensors/current`);\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                const data = await response.json();\n                log('Sensor data received', 'success');\n\n                if (data.readings) {\n                    let connectedCount = 0;\n\n                    // Process each sensor\n                    Object.keys(data.readings).forEach(sensorId => {\n                        const sensor = data.readings[sensorId];\n                        if (sensor.status !== 'disconnected' && sensor.status !== 'error') {\n                            connectedCount++;\n                        }\n                    });\n\n                    updateElement('sensorsConnected', `${connectedCount}/${Object.keys(data.readings).length}`);\n\n                    // Temperature from printer\n                    const printerTemp = data.readings.printer_temp;\n                    if (printerTemp && printerTemp.value) {\n                        if (printerTemp.value.nozzle !== undefined) {\n                            updateElement('nozzleTemp', `${printerTemp.value.nozzle.toFixed(1)}Â°C`);\n                        }\n                        if (printerTemp.value.bed !== undefined) {\n                            updateElement('bedTemp', `${printerTemp.value.bed.toFixed(1)}Â°C`);\n                        }\n                    }\n\n                    // Environmental data from BME280\n                    const bme280 = data.readings.bme280_main;\n                    if (bme280 && bme280.value) {\n                        if (bme280.value.temperature !== undefined) {\n                            updateElement('ambientTemp', `${bme280.value.temperature.toFixed(1)}Â°C`);\n                        }\n                        if (bme280.value.humidity !== undefined) {\n                            updateElement('humidity', `${bme280.value.humidity.toFixed(1)}%`);\n                        }\n                        if (bme280.value.pressure !== undefined) {\n                            updateElement('pressure', `${bme280.value.pressure.toFixed(1)} hPa`);\n                        }\n                    }\n\n                    // Vibration data\n                    const bedVib = data.readings.mpu6050_bed;\n                    if (bedVib && bedVib.value) {\n                        updateElement('bedVibration', `${Math.abs(bedVib.value).toFixed(2)} mm/sÂ²`);\n                    }\n\n                    const bodyVib = data.readings.mpu6050_body;\n                    if (bodyVib && bodyVib.value) {\n                        updateElement('bodyVibration', `${Math.abs(bodyVib.value).toFixed(2)} mm/sÂ²`);\n                    }\n                }\n\n            } catch (error) {\n                log(`Sensor fetch failed: ${error.message}`, 'error');\n            }\n        }\n\n        // Fetch print status\n        async function fetchPrintStatus() {\n            try {\n                const response = await fetch(`${API_BASE_URL}/print/status`);\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                const data = await response.json();\n                log('Print status received', 'success');\n\n                updateElement('printState', data.state || 'offline');\n                updateElement('jobName', data.job_name || 'No job');\n                updateElement('progress', `${(data.progress || 0).toFixed(1)}%`);\n\n                if (data.time_elapsed) {\n                    const minutes = Math.floor(data.time_elapsed / 60);\n                    const seconds = data.time_elapsed % 60;\n                    updateElement('timeElapsed', `${minutes}m ${seconds}s`);\n                }\n\n                if (data.state !== 'offline') {\n                    document.getElementById('printerStatus').className = 'status-badge status-connected';\n                    document.getElementById('printerStatus').textContent = 'Printer: Connected';\n                } else {\n                    document.getElementById('printerStatus').className = 'status-badge status-disconnected';\n                    document.getElementById('printerStatus').textContent = 'Printer: Offline';\n                }\n\n            } catch (error) {\n                log(`Print status fetch failed: ${error.message}`, 'error');\n                document.getElementById('printerStatus').className = 'status-badge status-disconnected';\n            }\n        }\n\n        // Fetch system health\n        async function fetchSystemHealth() {\n            try {\n                const response = await fetch(`${API_BASE_URL}/system/health`);\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                const data = await response.json();\n\n                if (data.components && data.components.database) {\n                    const dbStatus = data.components.database.status;\n                    updateElement('dbStatus', dbStatus === 'healthy' ? 'âœ“ Connected' : 'âœ— Error',\n                                  dbStatus === 'healthy' ? 'value-good' : 'value-critical');\n                }\n\n            } catch (error) {\n                log(`System health fetch failed: ${error.message}`, 'error');\n            }\n        }\n\n        // Update all data\n        async function updateAll() {\n            updateElement('lastUpdate', new Date().toLocaleTimeString());\n            await fetchHealth();\n            await fetchSensors();\n            await fetchPrintStatus();\n            await fetchSystemHealth();\n        }\n\n        // Control functions\n        async function emergencyStop() {\n            if (!confirm('Are you sure you want to emergency stop the printer?')) return;\n\n            try {\n                const response = await fetch(`${API_BASE_URL}/controls/emergency_stop`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' }\n                });\n\n                if (response.ok) {\n                    log('Emergency stop activated!', 'success');\n                    alert('Emergency stop activated!');\n                } else {\n                    log('Emergency stop failed', 'error');\n                    alert('Emergency stop failed!');\n                }\n            } catch (error) {\n                log(`Emergency stop error: ${error.message}`, 'error');\n                alert('Error: ' + error.message);\n            }\n        }\n\n        async function pauseResume() {\n            try {\n                const response = await fetch(`${API_BASE_URL}/controls/pause_resume`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' }\n                });\n\n                if (response.ok) {\n                    const data = await response.json();\n                    log('Print pause/resume toggled', 'success');\n                    alert(data.message || 'Print pause/resume toggled');\n                } else {\n                    log('Pause/resume failed', 'error');\n                }\n            } catch (error) {\n                log(`Pause/resume error: ${error.message}`, 'error');\n                alert('Error: ' + error.message);\n            }\n        }\n\n        async function calibrateSensors() {\n            if (!confirm('Start sensor calibration?')) return;\n\n            try {\n                const response = await fetch(`${API_BASE_URL}/controls/calibrate`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' }\n                });\n\n                if (response.ok) {\n                    log('Sensor calibration started', 'success');\n                    alert('Sensor calibration started!');\n                } else {\n                    log('Calibration failed', 'error');\n                }\n            } catch (error) {\n                log(`Calibration error: ${error.message}`, 'error');\n                alert('Error: ' + error.message);\n            }\n        }\n\n        async function exportData() {\n            try {\n                const response = await fetch(`${API_BASE_URL}/data/export`);\n                if (response.ok) {\n                    const data = await response.json();\n                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n                    const url = URL.createObjectURL(blob);\n                    const a = document.createElement('a');\n                    a.href = url;\n                    a.download = `navair_export_${new Date().toISOString()}.json`;\n                    a.click();\n                    log('Data exported successfully', 'success');\n                } else {\n                    log('Data export failed', 'error');\n                }\n            } catch (error) {\n                log(`Export error: ${error.message}`, 'error');\n                alert('Error: ' + error.message);\n            }\n        }\n\n        // Initialize\n        log(`Initializing dashboard...`);\n        log(`API URL: ${API_BASE_URL}`);\n\n        // Start updates\n        updateAll();\n        updateInterval = setInterval(updateAll, UPDATE_RATE);\n\n        log('Dashboard started - updating every 2 seconds', 'success');\n    </script>\n</body>\n</html>\n","numLines":596,"startLine":1,"totalLines":596}}}
{"parentUuid":"0cf39e81-f8da-49f3-a98c-3c3bb90639fb","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01WkVtQgQeZzpFEFc4BxYHbQ","type":"tool_result","content":"     1â†’* {\n     2â†’    margin: 0;\n     3â†’    padding: 0;\n     4â†’    box-sizing: border-box;\n     5â†’}\n     6â†’\n     7â†’body {\n     8â†’    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n     9â†’    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    10â†’    min-height: 100vh;\n    11â†’    color: #333;\n    12â†’}\n    13â†’\n    14â†’.header {\n    15â†’    background: rgba(255, 255, 255, 0.95);\n    16â†’    backdrop-filter: blur(10px);\n    17â†’    padding: 1rem 2rem;\n    18â†’    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);\n    19â†’    position: sticky;\n    20â†’    top: 0;\n    21â†’    z-index: 100;\n    22â†’}\n    23â†’\n    24â†’.header-content {\n    25â†’    display: flex;\n    26â†’    justify-content: space-between;\n    27â†’    align-items: center;\n    28â†’    max-width: 1400px;\n    29â†’    margin: 0 auto;\n    30â†’}\n    31â†’\n    32â†’.header h1 {\n    33â†’    color: #2c3e50;\n    34â†’    font-size: 1.8rem;\n    35â†’    font-weight: 600;\n    36â†’}\n    37â†’\n    38â†’.status-indicator {\n    39â†’    display: flex;\n    40â†’    align-items: center;\n    41â†’    gap: 0.5rem;\n    42â†’    padding: 0.5rem 1rem;\n    43â†’    background: rgba(255, 255, 255, 0.8);\n    44â†’    border-radius: 25px;\n    45â†’    border: 1px solid rgba(0, 0, 0, 0.1);\n    46â†’}\n    47â†’\n    48â†’.status-dot {\n    49â†’    width: 12px;\n    50â†’    height: 12px;\n    51â†’    border-radius: 50%;\n    52â†’    background: #95a5a6;\n    53â†’    animation: pulse 2s infinite;\n    54â†’}\n    55â†’\n    56â†’.status-dot.connected {\n    57â†’    background: #27ae60;\n    58â†’}\n    59â†’\n    60â†’.status-dot.error {\n    61â†’    background: #e74c3c;\n    62â†’}\n    63â†’\n    64â†’@keyframes pulse {\n    65â†’    0%, 100% { opacity: 1; }\n    66â†’    50% { opacity: 0.5; }\n    67â†’}\n    68â†’\n    69â†’.dashboard {\n    70â†’    max-width: 1400px;\n    71â†’    margin: 2rem auto;\n    72â†’    padding: 0 2rem;\n    73â†’}\n    74â†’\n    75â†’.dashboard-grid {\n    76â†’    display: grid;\n    77â†’    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    78â†’    gap: 1.5rem;\n    79â†’    grid-auto-rows: auto;\n    80â†’}\n    81â†’\n    82â†’.card {\n    83â†’    background: rgba(255, 255, 255, 0.95);\n    84â†’    backdrop-filter: blur(10px);\n    85â†’    border-radius: 15px;\n    86â†’    padding: 1.5rem;\n    87â†’    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n    88â†’    border: 1px solid rgba(255, 255, 255, 0.2);\n    89â†’    transition: transform 0.3s ease, box-shadow 0.3s ease;\n    90â†’}\n    91â†’\n    92â†’.card:hover {\n    93â†’    transform: translateY(-5px);\n    94â†’    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);\n    95â†’}\n    96â†’\n    97â†’.card h2 {\n    98â†’    color: #2c3e50;\n    99â†’    font-size: 1.4rem;\n   100â†’    margin-bottom: 1rem;\n   101â†’    border-bottom: 2px solid #3498db;\n   102â†’    padding-bottom: 0.5rem;\n   103â†’}\n   104â†’\n   105â†’/* Overview Card */\n   106â†’.overview-stats {\n   107â†’    display: flex;\n   108â†’    justify-content: space-between;\n   109â†’    gap: 1rem;\n   110â†’}\n   111â†’\n   112â†’.stat {\n   113â†’    text-align: center;\n   114â†’    flex: 1;\n   115â†’}\n   116â†’\n   117â†’.stat-label {\n   118â†’    display: block;\n   119â†’    font-size: 0.9rem;\n   120â†’    color: #7f8c8d;\n   121â†’    margin-bottom: 0.5rem;\n   122â†’}\n   123â†’\n   124â†’.stat-value {\n   125â†’    display: block;\n   126â†’    font-size: 1.8rem;\n   127â†’    font-weight: bold;\n   128â†’    color: #2c3e50;\n   129â†’}\n   130â†’\n   131â†’/* Printer Card */\n   132â†’.printer-status {\n   133â†’    background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);\n   134â†’    padding: 1rem;\n   135â†’    border-radius: 10px;\n   136â†’    color: white;\n   137â†’}\n   138â†’\n   139â†’.info-row {\n   140â†’    display: flex;\n   141â†’    justify-content: space-between;\n   142â†’    margin-bottom: 0.5rem;\n   143â†’}\n   144â†’\n   145â†’.info-label {\n   146â†’    font-weight: 500;\n   147â†’}\n   148â†’\n   149â†’.info-value {\n   150â†’    font-weight: bold;\n   151â†’}\n   152â†’\n   153â†’/* Temperature Card */\n   154â†’.temp-readings {\n   155â†’    display: grid;\n   156â†’    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n   157â†’    gap: 1rem;\n   158â†’}\n   159â†’\n   160â†’.temp-item {\n   161â†’    text-align: center;\n   162â†’    padding: 1rem;\n   163â†’    background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);\n   164â†’    border-radius: 10px;\n   165â†’    color: white;\n   166â†’}\n   167â†’\n   168â†’.temp-label {\n   169â†’    display: block;\n   170â†’    font-size: 0.9rem;\n   171â†’    opacity: 0.9;\n   172â†’    margin-bottom: 0.5rem;\n   173â†’}\n   174â†’\n   175â†’.temp-value {\n   176â†’    display: block;\n   177â†’    font-size: 1.4rem;\n   178â†’    font-weight: bold;\n   179â†’}\n   180â†’\n   181â†’/* Sensors Card */\n   182â†’.sensor-list {\n   183â†’    space-y: 0.5rem;\n   184â†’}\n   185â†’\n   186â†’.sensor-item {\n   187â†’    display: flex;\n   188â†’    justify-content: space-between;\n   189â†’    align-items: center;\n   190â†’    padding: 0.75rem;\n   191â†’    background: rgba(0, 0, 0, 0.05);\n   192â†’    border-radius: 8px;\n   193â†’    margin-bottom: 0.5rem;\n   194â†’}\n   195â†’\n   196â†’.sensor-name {\n   197â†’    font-weight: 500;\n   198â†’}\n   199â†’\n   200â†’.sensor-status {\n   201â†’    padding: 0.25rem 0.75rem;\n   202â†’    border-radius: 15px;\n   203â†’    font-size: 0.8rem;\n   204â†’    font-weight: bold;\n   205â†’    text-transform: uppercase;\n   206â†’}\n   207â†’\n   208â†’.sensor-status.connected {\n   209â†’    background: #d4edda;\n   210â†’    color: #155724;\n   211â†’}\n   212â†’\n   213â†’.sensor-status.disconnected {\n   214â†’    background: #f8d7da;\n   215â†’    color: #721c24;\n   216â†’}\n   217â†’\n   218â†’.sensor-status.error {\n   219â†’    background: #fff3cd;\n   220â†’    color: #856404;\n   221â†’}\n   222â†’\n   223â†’/* Chart Card */\n   224â†’.chart-card {\n   225â†’    grid-column: span 2;\n   226â†’}\n   227â†’\n   228â†’.chart-card canvas {\n   229â†’    max-height: 300px;\n   230â†’}\n   231â†’\n   232â†’/* Logs Card */\n   233â†’.logs-card {\n   234â†’    grid-column: span 2;\n   235â†’    max-height: 300px;\n   236â†’}\n   237â†’\n   238â†’.logs-container {\n   239â†’    max-height: 200px;\n   240â†’    overflow-y: auto;\n   241â†’    background: rgba(0, 0, 0, 0.05);\n   242â†’    border-radius: 8px;\n   243â†’    padding: 1rem;\n   244â†’}\n   245â†’\n   246â†’.log-entry {\n   247â†’    margin-bottom: 0.5rem;\n   248â†’    padding: 0.5rem;\n   249â†’    border-left: 3px solid #3498db;\n   250â†’    background: rgba(255, 255, 255, 0.5);\n   251â†’    border-radius: 4px;\n   252â†’    font-family: 'Courier New', monospace;\n   253â†’    font-size: 0.9rem;\n   254â†’}\n   255â†’\n   256â†’.log-entry.error {\n   257â†’    border-left-color: #e74c3c;\n   258â†’    background: rgba(231, 76, 60, 0.1);\n   259â†’}\n   260â†’\n   261â†’.log-entry.warning {\n   262â†’    border-left-color: #f39c12;\n   263â†’    background: rgba(243, 156, 18, 0.1);\n   264â†’}\n   265â†’\n   266â†’.log-timestamp {\n   267â†’    color: #7f8c8d;\n   268â†’    font-size: 0.8rem;\n   269â†’}\n   270â†’\n   271â†’/* Responsive Design */\n   272â†’@media (max-width: 768px) {\n   273â†’    .header-content {\n   274â†’        flex-direction: column;\n   275â†’        gap: 1rem;\n   276â†’        text-align: center;\n   277â†’    }\n   278â†’    \n   279â†’    .dashboard {\n   280â†’        padding: 0 1rem;\n   281â†’    }\n   282â†’    \n   283â†’    .dashboard-grid {\n   284â†’        grid-template-columns: 1fr;\n   285â†’    }\n   286â†’    \n   287â†’    .chart-card,\n   288â†’    .logs-card {\n   289â†’        grid-column: span 1;\n   290â†’    }\n   291â†’    \n   292â†’    .overview-stats {\n   293â†’        flex-direction: column;\n   294â†’    }\n   295â†’}\n   296â†’\n   297â†’/* Loading States */\n   298â†’.loading {\n   299â†’    opacity: 0.6;\n   300â†’    pointer-events: none;\n   301â†’}\n   302â†’\n   303â†’.loading::after {\n   304â†’    content: '';\n   305â†’    position: absolute;\n   306â†’    top: 50%;\n   307â†’    left: 50%;\n   308â†’    width: 20px;\n   309â†’    height: 20px;\n   310â†’    margin: -10px 0 0 -10px;\n   311â†’    border: 2px solid #3498db;\n   312â†’    border-radius: 50%;\n   313â†’    border-top-color: transparent;\n   314â†’    animation: spin 1s linear infinite;\n   315â†’}\n   316â†’\n   317â†’@keyframes spin {\n   318â†’    to { transform: rotate(360deg); }\n   319â†’}\n\n<system-reminder>\nWhenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"655a5b6e-845e-4498-a7fb-6176a572995e","timestamp":"2025-10-17T03:07:26.715Z","toolUseResult":{"type":"text","file":{"filePath":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web/static/css/dashboard.css","content":"* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    color: #333;\n}\n\n.header {\n    background: rgba(255, 255, 255, 0.95);\n    backdrop-filter: blur(10px);\n    padding: 1rem 2rem;\n    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);\n    position: sticky;\n    top: 0;\n    z-index: 100;\n}\n\n.header-content {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    max-width: 1400px;\n    margin: 0 auto;\n}\n\n.header h1 {\n    color: #2c3e50;\n    font-size: 1.8rem;\n    font-weight: 600;\n}\n\n.status-indicator {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.5rem 1rem;\n    background: rgba(255, 255, 255, 0.8);\n    border-radius: 25px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.status-dot {\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    background: #95a5a6;\n    animation: pulse 2s infinite;\n}\n\n.status-dot.connected {\n    background: #27ae60;\n}\n\n.status-dot.error {\n    background: #e74c3c;\n}\n\n@keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n}\n\n.dashboard {\n    max-width: 1400px;\n    margin: 2rem auto;\n    padding: 0 2rem;\n}\n\n.dashboard-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    gap: 1.5rem;\n    grid-auto-rows: auto;\n}\n\n.card {\n    background: rgba(255, 255, 255, 0.95);\n    backdrop-filter: blur(10px);\n    border-radius: 15px;\n    padding: 1.5rem;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);\n}\n\n.card h2 {\n    color: #2c3e50;\n    font-size: 1.4rem;\n    margin-bottom: 1rem;\n    border-bottom: 2px solid #3498db;\n    padding-bottom: 0.5rem;\n}\n\n/* Overview Card */\n.overview-stats {\n    display: flex;\n    justify-content: space-between;\n    gap: 1rem;\n}\n\n.stat {\n    text-align: center;\n    flex: 1;\n}\n\n.stat-label {\n    display: block;\n    font-size: 0.9rem;\n    color: #7f8c8d;\n    margin-bottom: 0.5rem;\n}\n\n.stat-value {\n    display: block;\n    font-size: 1.8rem;\n    font-weight: bold;\n    color: #2c3e50;\n}\n\n/* Printer Card */\n.printer-status {\n    background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);\n    padding: 1rem;\n    border-radius: 10px;\n    color: white;\n}\n\n.info-row {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 0.5rem;\n}\n\n.info-label {\n    font-weight: 500;\n}\n\n.info-value {\n    font-weight: bold;\n}\n\n/* Temperature Card */\n.temp-readings {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n    gap: 1rem;\n}\n\n.temp-item {\n    text-align: center;\n    padding: 1rem;\n    background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);\n    border-radius: 10px;\n    color: white;\n}\n\n.temp-label {\n    display: block;\n    font-size: 0.9rem;\n    opacity: 0.9;\n    margin-bottom: 0.5rem;\n}\n\n.temp-value {\n    display: block;\n    font-size: 1.4rem;\n    font-weight: bold;\n}\n\n/* Sensors Card */\n.sensor-list {\n    space-y: 0.5rem;\n}\n\n.sensor-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.75rem;\n    background: rgba(0, 0, 0, 0.05);\n    border-radius: 8px;\n    margin-bottom: 0.5rem;\n}\n\n.sensor-name {\n    font-weight: 500;\n}\n\n.sensor-status {\n    padding: 0.25rem 0.75rem;\n    border-radius: 15px;\n    font-size: 0.8rem;\n    font-weight: bold;\n    text-transform: uppercase;\n}\n\n.sensor-status.connected {\n    background: #d4edda;\n    color: #155724;\n}\n\n.sensor-status.disconnected {\n    background: #f8d7da;\n    color: #721c24;\n}\n\n.sensor-status.error {\n    background: #fff3cd;\n    color: #856404;\n}\n\n/* Chart Card */\n.chart-card {\n    grid-column: span 2;\n}\n\n.chart-card canvas {\n    max-height: 300px;\n}\n\n/* Logs Card */\n.logs-card {\n    grid-column: span 2;\n    max-height: 300px;\n}\n\n.logs-container {\n    max-height: 200px;\n    overflow-y: auto;\n    background: rgba(0, 0, 0, 0.05);\n    border-radius: 8px;\n    padding: 1rem;\n}\n\n.log-entry {\n    margin-bottom: 0.5rem;\n    padding: 0.5rem;\n    border-left: 3px solid #3498db;\n    background: rgba(255, 255, 255, 0.5);\n    border-radius: 4px;\n    font-family: 'Courier New', monospace;\n    font-size: 0.9rem;\n}\n\n.log-entry.error {\n    border-left-color: #e74c3c;\n    background: rgba(231, 76, 60, 0.1);\n}\n\n.log-entry.warning {\n    border-left-color: #f39c12;\n    background: rgba(243, 156, 18, 0.1);\n}\n\n.log-timestamp {\n    color: #7f8c8d;\n    font-size: 0.8rem;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .header-content {\n        flex-direction: column;\n        gap: 1rem;\n        text-align: center;\n    }\n    \n    .dashboard {\n        padding: 0 1rem;\n    }\n    \n    .dashboard-grid {\n        grid-template-columns: 1fr;\n    }\n    \n    .chart-card,\n    .logs-card {\n        grid-column: span 1;\n    }\n    \n    .overview-stats {\n        flex-direction: column;\n    }\n}\n\n/* Loading States */\n.loading {\n    opacity: 0.6;\n    pointer-events: none;\n}\n\n.loading::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    margin: -10px 0 0 -10px;\n    border: 2px solid #3498db;\n    border-radius: 50%;\n    border-top-color: transparent;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    to { transform: rotate(360deg); }\n}","numLines":319,"startLine":1,"totalLines":319}}}
{"parentUuid":"655a5b6e-845e-4498-a7fb-6176a572995e","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_015hsojDmaq7NCftBrgCbv3p","type":"tool_result","content":"     1â†’/**\n     2â†’ * NAVAIR Additive Manufacturing Dashboard\n     3â†’ * \n     4â†’ * A modern, professional web dashboard for monitoring NAVAIR 3D printer operations\n     5â†’ * with real-time data visualization, system health monitoring, and quality analytics.\n     6â†’ * \n     7â†’ * @version 2.0\n     8â†’ * @author NAVAIR Team\n     9â†’ * @created January 2025\n    10â†’ * \n    11â†’ * Features:\n    12â†’ * - Real-time sensor monitoring with gauges and charts\n    13â†’ * - Multi-page navigation with accessibility support\n    14â†’ * - API integration with comprehensive error handling\n    15â†’ * - Responsive design for mobile and desktop\n    16â†’ * - Professional UI with loading states and animations\n    17â†’ */\n    18â†’\n    19â†’/**\n    20â†’ * Main Dashboard Controller Class\n    21â†’ * \n    22â†’ * Manages all dashboard functionality including:\n    23â†’ * - API communication and data fetching\n    24â†’ * - Chart rendering and updates\n    25â†’ * - UI state management\n    26â†’ * - Error handling and user feedback\n    27â†’ */\n    28â†’class NAVAIRDashboard {\n    29â†’    /**\n    30â†’     * Initialize dashboard with configuration and state\n    31â†’     */\n    32â†’    constructor() {\n    33â†’        // Auto-detect API URL based on window location\n    34â†’        // If accessed from laptop (192.168.2.x), use Pi's IP\n    35â†’        // If accessed from Pi (localhost), use localhost\n    36â†’        const hostname = window.location.hostname;\n    37â†’        if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    38â†’            this.apiBaseUrl = 'http://localhost:8000/api';\n    39â†’        } else {\n    40â†’            // Use same host as dashboard but port 8000\n    41â†’            this.apiBaseUrl = `http://${hostname}:8000/api`;\n    42â†’        }\n    43â†’        console.log('API Base URL:', this.apiBaseUrl);\n    44â†’\n    45â†’        this.updateInterval = 2000; // 2 seconds\n    46â†’        this.charts = {};\n    47â†’        this.gauges = {};\n    48â†’        this.isConnected = {\n    49â†’            sensors: false,\n    50â†’            print: false\n    51â†’        };\n    52â†’        this.sensorHistory = [];\n    53â†’        this.maxHistoryPoints = 50;\n    54â†’\n    55â†’        this.init();\n    56â†’    }\n    57â†’\n    58â†’    /**\n    59â†’     * Initialize dashboard components and start data fetching\n    60â†’     */\n    61â†’    async init() {\n    62â†’        this.setupGauges();\n    63â†’        this.setupCharts();\n    64â†’        this.startDataFetching();\n    65â†’        this.updateConnectionStatus();\n    66â†’    }\n    67â†’\n    68â†’    // =============================================================================\n    69â†’    // CHART AND GAUGE SETUP METHODS\n    70â†’    // =============================================================================\n    71â†’    \n    72â†’    /**\n    73â†’     * Setup plain text displays instead of gauge charts\n    74â†’     */\n    75â†’    setupGauges() {\n    76â†’        // No gauge charts - using plain text displays\n    77â†’        // Text displays are updated directly in updateDashboardData()\n    78â†’        console.log('Plain text displays initialized (no gauge charts)');\n    79â†’    }\n    80â†’\n    81â†’    createGauge(canvasId, options) {\n    82â†’        // Removed - using plain text instead\n    83â†’        return null;\n    84â†’    }\n    85â†’\n    86â†’    /**\n    87â†’     * Setup line charts for vibration and historical data\n    88â†’     */\n    89â†’    setupCharts() {\n    90â†’        // Vibration Chart\n    91â†’        const vibCtx = document.getElementById('vibration-chart');\n    92â†’        if (vibCtx) {\n    93â†’            this.charts.vibration = new Chart(vibCtx, {\n    94â†’                type: 'line',\n    95â†’                data: {\n    96â†’                    labels: [],\n    97â†’                    datasets: [{\n    98â†’                        label: 'Bed Vibration',\n    99â†’                        data: [],\n   100â†’                        borderColor: '#e74c3c',\n   101â†’                        backgroundColor: 'rgba(231, 76, 60, 0.1)',\n   102â†’                        tension: 0.4\n   103â†’                    }, {\n   104â†’                        label: 'Body Vibration',\n   105â†’                        data: [],\n   106â†’                        borderColor: '#3498db',\n   107â†’                        backgroundColor: 'rgba(52, 152, 219, 0.1)',\n   108â†’                        tension: 0.4\n   109â†’                    }]\n   110â†’                },\n   111â†’                options: {\n   112â†’                    responsive: true,\n   113â†’                    maintainAspectRatio: false,\n   114â†’                    interaction: {\n   115â†’                        intersect: false,\n   116â†’                        mode: 'index'\n   117â†’                    },\n   118â†’                    scales: {\n   119â†’                        y: {\n   120â†’                            beginAtZero: true,\n   121â†’                            title: {\n   122â†’                                display: true,\n   123â†’                                text: 'Vibration (mm/sÂ²)'\n   124â†’                            }\n   125â†’                        },\n   126â†’                        x: {\n   127â†’                            title: {\n   128â†’                                display: true,\n   129â†’                                text: 'Time'\n   130â†’                            }\n   131â†’                        }\n   132â†’                    },\n   133â†’                    plugins: {\n   134â†’                        legend: {\n   135â†’                            display: true,\n   136â†’                            position: 'top'\n   137â†’                        }\n   138â†’                    }\n   139â†’                }\n   140â†’            });\n   141â†’        }\n   142â†’\n   143â†’        // Historical Data Chart\n   144â†’        const historyCtx = document.getElementById('history-chart');\n   145â†’        if (historyCtx) {\n   146â†’            this.charts.history = new Chart(historyCtx, {\n   147â†’                type: 'line',\n   148â†’                data: {\n   149â†’                    labels: [],\n   150â†’                    datasets: [{\n   151â†’                        label: 'Nozzle Temp (Â°C)',\n   152â†’                        data: [],\n   153â†’                        borderColor: '#e74c3c',\n   154â†’                        backgroundColor: 'rgba(231, 76, 60, 0.1)',\n   155â†’                        yAxisID: 'y'\n   156â†’                    }, {\n   157â†’                        label: 'Bed Temp (Â°C)',\n   158â†’                        data: [],\n   159â†’                        borderColor: '#e67e22',\n   160â†’                        backgroundColor: 'rgba(230, 126, 34, 0.1)',\n   161â†’                        yAxisID: 'y'\n   162â†’                    }, {\n   163â†’                        label: 'Humidity (%)',\n   164â†’                        data: [],\n   165â†’                        borderColor: '#3498db',\n   166â†’                        backgroundColor: 'rgba(52, 152, 219, 0.1)',\n   167â†’                        yAxisID: 'y1'\n   168â†’                    }]\n   169â†’                },\n   170â†’                options: {\n   171â†’                    responsive: true,\n   172â†’                    maintainAspectRatio: false,\n   173â†’                    interaction: {\n   174â†’                        intersect: false,\n   175â†’                        mode: 'index'\n   176â†’                    },\n   177â†’                    scales: {\n   178â†’                        y: {\n   179â†’                            type: 'linear',\n   180â†’                            display: true,\n   181â†’                            position: 'left',\n   182â†’                            title: {\n   183â†’                                display: true,\n   184â†’                                text: 'Temperature (Â°C)'\n   185â†’                            }\n   186â†’                        },\n   187â†’                        y1: {\n   188â†’                            type: 'linear',\n   189â†’                            display: true,\n   190â†’                            position: 'right',\n   191â†’                            title: {\n   192â†’                                display: true,\n   193â†’                                text: 'Humidity (%)'\n   194â†’                            },\n   195â†’                            grid: {\n   196â†’                                drawOnChartArea: false,\n   197â†’                            },\n   198â†’                        },\n   199â†’                        x: {\n   200â†’                            title: {\n   201â†’                                display: true,\n   202â†’                                text: 'Time'\n   203â†’                            }\n   204â†’                        }\n   205â†’                    },\n   206â†’                    plugins: {\n   207â†’                        legend: {\n   208â†’                            display: true,\n   209â†’                            position: 'top'\n   210â†’                        }\n   211â†’                    }\n   212â†’                }\n   213â†’            });\n   214â†’        }\n   215â†’    }\n   216â†’\n   217â†’    // =============================================================================\n   218â†’    // API COMMUNICATION METHODS\n   219â†’    // =============================================================================\n   220â†’    \n   221â†’    /**\n   222â†’     * Fetch current sensor data from API with proper error handling\n   223â†’     * @returns {Object|null} Sensor data or null on error\n   224â†’     */\n   225â†’    async fetchSensorData() {\n   226â†’        // Show loading states\n   227â†’        this.setLoadingState('nozzle-temp-value');\n   228â†’        this.setLoadingState('bed-temp-value');\n   229â†’        this.setLoadingState('humidity-value');\n   230â†’        \n   231â†’        try {\n   232â†’            const controller = new AbortController();\n   233â†’            const timeoutId = setTimeout(() => controller.abort(), 5000);\n   234â†’            \n   235â†’            const response = await fetch(`${this.apiBaseUrl}/sensors/current`, {\n   236â†’                method: 'GET',\n   237â†’                headers: {\n   238â†’                    'Accept': 'application/json',\n   239â†’                    'Content-Type': 'application/json'\n   240â†’                },\n   241â†’                signal: controller.signal\n   242â†’            });\n   243â†’\n   244â†’            clearTimeout(timeoutId);\n   245â†’\n   246â†’            if (!response.ok) {\n   247â†’                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n   248â†’            }\n   249â†’\n   250â†’            const data = await response.json();\n   251â†’            this.updateSensorData(data);\n   252â†’            this.setConnectionStatus('sensors', true);\n   253â†’            return data;\n   254â†’\n   255â†’        } catch (error) {\n   256â†’            console.error('Sensor API Error:', error);\n   257â†’            this.setConnectionStatus('sensors', false);\n   258â†’            \n   259â†’            let errorMessage = 'Unable to connect to sensor API';\n   260â†’            if (error.name === 'AbortError') {\n   261â†’                errorMessage = 'Sensor API request timed out';\n   262â†’            } else if (!navigator.onLine) {\n   263â†’                errorMessage = 'No internet connection';\n   264â†’            }\n   265â†’            \n   266â†’            this.showSensorError(errorMessage);\n   267â†’            return null;\n   268â†’        }\n   269â†’    }\n   270â†’\n   271â†’    async fetchPrintStatus() {\n   272â†’        try {\n   273â†’            const response = await fetch(`${this.apiBaseUrl}/print/status`, {\n   274â†’                method: 'GET',\n   275â†’                headers: {\n   276â†’                    'Accept': 'application/json',\n   277â†’                    'Content-Type': 'application/json'\n   278â†’                },\n   279â†’                timeout: 5000\n   280â†’            });\n   281â†’\n   282â†’            if (!response.ok) {\n   283â†’                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n   284â†’            }\n   285â†’\n   286â†’            const data = await response.json();\n   287â†’            this.updatePrintData(data);\n   288â†’            this.setConnectionStatus('print', true);\n   289â†’            return data;\n   290â†’\n   291â†’        } catch (error) {\n   292â†’            console.error('Print API Error:', error);\n   293â†’            this.setConnectionStatus('print', false);\n   294â†’            this.showPrintError('Unable to connect to print API');\n   295â†’            return null;\n   296â†’        }\n   297â†’    }\n   298â†’\n   299â†’    updateSensorData(data) {\n   300â†’        console.log('Received sensor data:', data);\n   301â†’\n   302â†’        if (!data || !data.readings) {\n   303â†’            this.showSensorError('Invalid sensor data received');\n   304â†’            return;\n   305â†’        }\n   306â†’\n   307â†’        const readings = data.readings;\n   308â†’\n   309â†’        // Extract printer temperature from API response\n   310â†’        if (readings.printer_temp && readings.printer_temp.value) {\n   311â†’            const tempData = readings.printer_temp.value;\n   312â†’            if (tempData.nozzle !== undefined) {\n   313â†’                this.updateElement('nozzle-temp-value', `${tempData.nozzle.toFixed(1)}Â°C`);\n   314â†’            }\n   315â†’            if (tempData.bed !== undefined) {\n   316â†’                this.updateElement('bed-temp-value', `${tempData.bed.toFixed(1)}Â°C`);\n   317â†’            }\n   318â†’        } else {\n   319â†’            // Show disconnected status\n   320â†’            this.updateElement('nozzle-temp-value', 'N/A');\n   321â†’            this.updateElement('bed-temp-value', 'N/A');\n   322â†’        }\n   323â†’\n   324â†’        // BME280 environmental data\n   325â†’        if (readings.bme280_main && readings.bme280_main.value) {\n   326â†’            const envData = readings.bme280_main.value;\n   327â†’            if (envData.temperature !== undefined) {\n   328â†’                this.updateElement('ambient-temp-value', `${envData.temperature.toFixed(1)}Â°C`);\n   329â†’            }\n   330â†’            if (envData.humidity !== undefined) {\n   331â†’                this.updateElement('humidity-value', `${envData.humidity.toFixed(1)}%`);\n   332â†’            }\n   333â†’            if (envData.pressure !== undefined) {\n   334â†’                this.updateElement('pressure-value', `${envData.pressure.toFixed(1)} hPa`);\n   335â†’            }\n   336â†’        } else {\n   337â†’            this.updateElement('ambient-temp-value', 'N/A');\n   338â†’            this.updateElement('humidity-value', 'N/A');\n   339â†’            this.updateElement('pressure-value', 'N/A');\n   340â†’        }\n   341â†’\n   342â†’        // MPU6050 vibration data\n   343â†’        const bedVibData = readings.mpu6050_bed;\n   344â†’        const bodyVibData = readings.mpu6050_body;\n   345â†’\n   346â†’        if (bedVibData && bedVibData.value) {\n   347â†’            const bedVib = Math.abs(bedVibData.value) || 0;\n   348â†’            this.updateElement('bed-vibration-value', `${bedVib.toFixed(2)} mm/sÂ²`);\n   349â†’        } else {\n   350â†’            this.updateElement('bed-vibration-value', 'N/A');\n   351â†’        }\n   352â†’\n   353â†’        if (bodyVibData && bodyVibData.value) {\n   354â†’            const bodyVib = Math.abs(bodyVibData.value) || 0;\n   355â†’            this.updateElement('body-vibration-value', `${bodyVib.toFixed(2)} mm/sÂ²`);\n   356â†’        } else {\n   357â†’            this.updateElement('body-vibration-value', 'N/A');\n   358â†’        }\n   359â†’\n   360â†’        // Show connection status\n   361â†’        this.updateElement('connection-status', 'API Connected', 'success');\n   362â†’    }\n   363â†’\n   364â†’    updatePrintData(data) {\n   365â†’        console.log('Received print data:', data);\n   366â†’\n   367â†’        if (!data) {\n   368â†’            this.showPrintError('Invalid print data received');\n   369â†’            return;\n   370â†’        }\n   371â†’\n   372â†’        // Update print job information\n   373â†’        this.updateElement('job-name', data.job_name || 'No active job');\n   374â†’        this.updateElement('job-status', data.state || 'offline');\n   375â†’        this.updateElement('job-progress', `${(data.progress || 0).toFixed(1)}%`);\n   376â†’\n   377â†’        // Calculate time remaining\n   378â†’        if (data.time_total && data.time_elapsed) {\n   379â†’            const remaining = Math.max(0, data.time_total - data.time_elapsed);\n   380â†’            const remainingMinutes = Math.floor(remaining / 60);\n   381â†’            this.updateElement('time-remaining', `${remainingMinutes}m`);\n   382â†’        } else {\n   383â†’            this.updateElement('time-remaining', '--');\n   384â†’        }\n   385â†’\n   386â†’        // Quality score placeholder (will come from ML predictions)\n   387â†’        this.updateElement('quality-value', 'N/A');\n   388â†’        this.updateElement('ml-prediction', 'Monitoring...');\n   389â†’    }\n   390â†’\n   391â†’    calculateVibrationMagnitude(vibData) {\n   392â†’        if (!vibData || typeof vibData.x !== 'number') return 0;\n   393â†’        return Math.sqrt(\n   394â†’            Math.pow(vibData.x, 2) + \n   395â†’            Math.pow(vibData.y, 2) + \n   396â†’            Math.pow(vibData.z, 2)\n   397â†’        );\n   398â†’    }\n   399â†’\n   400â†’    addToHistory(data) {\n   401â†’        const timestamp = new Date();\n   402â†’        const historyPoint = {\n   403â†’            timestamp: timestamp,\n   404â†’            nozzleTemp: data.temperature?.nozzle || 0,\n   405â†’            bedTemp: data.temperature?.bed || 0,\n   406â†’            humidity: data.humidity || 0\n   407â†’        };\n   408â†’\n   409â†’        this.sensorHistory.push(historyPoint);\n   410â†’        \n   411â†’        // Keep only last N points\n   412â†’        if (this.sensorHistory.length > this.maxHistoryPoints) {\n   413â†’            this.sensorHistory.shift();\n   414â†’        }\n   415â†’    }\n   416â†’\n   417â†’    updateVibrationChart(bedVib, bodyVib) {\n   418â†’        if (!this.charts.vibration) return;\n   419â†’\n   420â†’        const timestamp = new Date().toLocaleTimeString();\n   421â†’        const chart = this.charts.vibration;\n   422â†’\n   423â†’        chart.data.labels.push(timestamp);\n   424â†’        chart.data.datasets[0].data.push(bedVib);\n   425â†’        chart.data.datasets[1].data.push(bodyVib);\n   426â†’\n   427â†’        // Keep only last 20 points\n   428â†’        if (chart.data.labels.length > 20) {\n   429â†’            chart.data.labels.shift();\n   430â†’            chart.data.datasets[0].data.shift();\n   431â†’            chart.data.datasets[1].data.shift();\n   432â†’        }\n   433â†’\n   434â†’        chart.update('none');\n   435â†’    }\n   436â†’\n   437â†’    updateHistoryChart() {\n   438â†’        if (!this.charts.history || this.sensorHistory.length === 0) return;\n   439â†’\n   440â†’        const chart = this.charts.history;\n   441â†’        const labels = this.sensorHistory.map(point => point.timestamp.toLocaleTimeString());\n   442â†’        \n   443â†’        chart.data.labels = labels;\n   444â†’        chart.data.datasets[0].data = this.sensorHistory.map(point => point.nozzleTemp);\n   445â†’        chart.data.datasets[1].data = this.sensorHistory.map(point => point.bedTemp);\n   446â†’        chart.data.datasets[2].data = this.sensorHistory.map(point => point.humidity);\n   447â†’\n   448â†’        chart.update('none');\n   449â†’    }\n   450â†’\n   451â†’    setConnectionStatus(type, connected) {\n   452â†’        this.isConnected[type] = connected;\n   453â†’        this.showConnectionStatus(type, connected);\n   454â†’    }\n   455â†’\n   456â†’    updateConnectionStatus() {\n   457â†’        this.updateElement('last-update', new Date().toLocaleTimeString());\n   458â†’    }\n   459â†’\n   460â†’    showSensorError(message) {\n   461â†’        this.updateElement('nozzle-temp-value', 'API Error', 'error');\n   462â†’        this.updateElement('bed-temp-value', 'API Error', 'error');\n   463â†’        this.updateElement('humidity-value', 'API Error', 'error');\n   464â†’        this.updateElement('pressure-value', 'API Error', 'error');\n   465â†’        this.updateElement('ambient-temp-value', 'API Error', 'error');\n   466â†’        this.updateElement('bed-vibration-value', 'API Error', 'error');\n   467â†’        this.updateElement('body-vibration-value', 'API Error', 'error');\n   468â†’        this.showConnectionStatus('sensors', false, message);\n   469â†’    }\n   470â†’\n   471â†’    showPrintError(message) {\n   472â†’        this.updateElement('job-name', 'API Connection Failed', 'error');\n   473â†’        this.updateElement('job-status', 'Disconnected', 'error');\n   474â†’        this.updateElement('job-progress', 'API Error', 'error');\n   475â†’        this.updateElement('time-remaining', 'No Connection', 'error');\n   476â†’        this.updateElement('quality-value', 'API Error', 'error');\n   477â†’        this.updateElement('ml-prediction', 'No connection', 'error');\n   478â†’        this.showConnectionStatus('print', false, message);\n   479â†’        this.showQualityError();\n   480â†’    }\n   481â†’\n   482â†’    showAnalysisError() {\n   483â†’        this.updateElement('correlation-status', 'API Not Connected');\n   484â†’        this.updateElement('anomaly-count', 'No Data Available');\n   485â†’        this.updateElement('prediction-accuracy', 'API Error');\n   486â†’        this.updateElement('process-capability', 'No Connection');\n   487â†’        this.updateElement('ml-confidence', 'API Error');\n   488â†’        this.updateElement('training-accuracy', 'No Data');\n   489â†’        this.updateElement('failure-risk', 'API Not Available');\n   490â†’        this.updateElement('quality-risk', 'No Connection');\n   491â†’    }\n   492â†’\n   493â†’    showHealthError() {\n   494â†’        this.updateElement('cpu-temp', 'API Error');\n   495â†’        this.updateElement('memory-usage', 'API Error');\n   496â†’        this.updateElement('disk-usage', 'API Error');\n   497â†’        this.updateElement('network-status', 'Disconnected');\n   498â†’        this.updateElement('bme280-status', 'API Error');\n   499â†’        this.updateElement('mpu-bed-status', 'API Error');\n   500â†’        this.updateElement('mpu-body-status', 'API Error');\n   501â†’        this.updateElement('laser-status', 'API Error');\n   502â†’    }\n   503â†’\n   504â†’    showQualityError() {\n   505â†’        this.updateElement('overall-quality', 'API Not Available');\n   506â†’        this.updateElement('successful-prints', 'No Data');\n   507â†’        this.updateElement('avg-print-time', 'API Error');\n   508â†’        this.updateElement('material-efficiency', 'No Connection');\n   509â†’        this.updateElement('critical-failures', 'API Error');\n   510â†’        this.updateElement('medium-risk', 'API Error');\n   511â†’        this.updateElement('low-risk', 'API Error');\n   512â†’        this.updateElement('rpn-average', 'No Data');\n   513â†’    }\n   514â†’\n   515â†’    showMaintenanceError() {\n   516â†’        this.updateElement('next-calibration', 'API Error');\n   517â†’        this.updateElement('sensor-cleaning', 'No Data Available');\n   518â†’        this.updateElement('filter-replacement', 'API Error');\n   519â†’        this.updateElement('system-backup', 'API Not Connected');\n   520â†’        this.updateElement('last-bme280-cal', 'API Error');\n   521â†’        this.updateElement('last-mpu-cal', 'API Error');\n   522â†’        this.updateElement('laser-check', 'No Data');\n   523â†’        this.updateElement('drift-compensation', 'API Error');\n   524â†’    }\n   525â†’\n   526â†’    // =============================================================================\n   527â†’    // UI UPDATE AND STATE MANAGEMENT METHODS\n   528â†’    // =============================================================================\n   529â†’    \n   530â†’    /**\n   531â†’     * Update DOM element with value and optional CSS class\n   532â†’     * @param {string} id - Element ID\n   533â†’     * @param {string} value - Text content to set\n   534â†’     * @param {string} className - Optional CSS class to add\n   535â†’     */\n   536â†’    updateElement(id, value, className = '') {\n   537â†’        const element = document.getElementById(id);\n   538â†’        if (element) {\n   539â†’            element.textContent = value;\n   540â†’            \n   541â†’            // Remove existing state classes\n   542â†’            element.classList.remove('loading', 'error', 'success');\n   543â†’            \n   544â†’            // Add new class if specified\n   545â†’            if (className) {\n   546â†’                element.classList.add(className);\n   547â†’            }\n   548â†’        }\n   549â†’    }\n   550â†’\n   551â†’    setLoadingState(id, loading = true) {\n   552â†’        const element = document.getElementById(id);\n   553â†’        if (element) {\n   554â†’            if (loading) {\n   555â†’                element.classList.add('loading');\n   556â†’                element.textContent = 'Loading...';\n   557â†’            } else {\n   558â†’                element.classList.remove('loading');\n   559â†’            }\n   560â†’        }\n   561â†’    }\n   562â†’\n   563â†’    showConnectionStatus(type, connected, details = '') {\n   564â†’        const statusDot = document.getElementById(`${type}-status`);\n   565â†’        const statusText = document.getElementById(`${type}-connection`);\n   566â†’        \n   567â†’        if (statusDot) {\n   568â†’            statusDot.className = `status-dot ${connected ? 'connected' : 'disconnected'}`;\n   569â†’            statusDot.setAttribute('aria-label', connected ? 'Connected' : 'Disconnected');\n   570â†’        }\n   571â†’        \n   572â†’        if (statusText) {\n   573â†’            const status = connected ? 'Connected' : 'Disconnected';\n   574â†’            statusText.textContent = details ? `${status} - ${details}` : status;\n   575â†’            statusText.className = `connection-status ${connected ? 'connected' : 'disconnected'}`;\n   576â†’        }\n   577â†’    }\n   578â†’\n   579â†’    showAlert(message, type = 'error') {\n   580â†’        const alert = document.getElementById(`${type}-alert`);\n   581â†’        if (alert) {\n   582â†’            alert.textContent = message;\n   583â†’            alert.style.display = 'block';\n   584â†’            setTimeout(() => {\n   585â†’                alert.style.display = 'none';\n   586â†’            }, 5000);\n   587â†’        }\n   588â†’    }\n   589â†’\n   590â†’    startDataFetching() {\n   591â†’        // Initial fetch\n   592â†’        this.fetchSensorData();\n   593â†’        this.fetchPrintStatus();\n   594â†’        \n   595â†’        // Show initial errors for all pages\n   596â†’        this.showAnalysisError();\n   597â†’        this.showHealthError();\n   598â†’        this.showQualityError();\n   599â†’        this.showMaintenanceError();\n   600â†’\n   601â†’        // Set up intervals\n   602â†’        setInterval(() => {\n   603â†’            this.fetchSensorData();\n   604â†’            this.updateConnectionStatus();\n   605â†’        }, this.updateInterval);\n   606â†’\n   607â†’        setInterval(() => {\n   608â†’            this.fetchPrintStatus();\n   609â†’        }, 5000); // Print status every 5 seconds\n   610â†’    }\n   611â†’}\n   612â†’\n   613â†’// =============================================================================\n   614â†’// CONTROL FUNCTIONS - System Control Actions\n   615â†’// =============================================================================\n   616â†’\n   617â†’/**\n   618â†’ * Emergency stop function - immediately halts printer operation\n   619â†’ */\n   620â†’async function emergencyStop() {\n   621â†’    dashboard.showAlert('Emergency stop activated!', 'error');\n   622â†’    try {\n   623â†’        const response = await fetch(`${dashboard.apiBaseUrl}/controls/emergency_stop`, {\n   624â†’            method: 'POST',\n   625â†’            headers: { 'Content-Type': 'application/json' }\n   626â†’        });\n   627â†’        if (response.ok) {\n   628â†’            dashboard.showAlert('Emergency stop successful', 'success');\n   629â†’        }\n   630â†’    } catch (error) {\n   631â†’        console.error('Emergency stop failed:', error);\n   632â†’    }\n   633â†’}\n   634â†’\n   635â†’async function pauseResume() {\n   636â†’    try {\n   637â†’        const response = await fetch(`${dashboard.apiBaseUrl}/controls/pause_resume`, {\n   638â†’            method: 'POST',\n   639â†’            headers: { 'Content-Type': 'application/json' }\n   640â†’        });\n   641â†’        if (response.ok) {\n   642â†’            dashboard.showAlert('Pause/Resume command sent', 'success');\n   643â†’        }\n   644â†’    } catch (error) {\n   645â†’        console.error('Pause/Resume failed:', error);\n   646â†’        dashboard.showAlert('Unable to send pause/resume command', 'error');\n   647â†’    }\n   648â†’}\n   649â†’\n   650â†’async function calibrateSensors() {\n   651â†’    dashboard.showAlert('Starting sensor calibration...', 'success');\n   652â†’    try {\n   653â†’        const response = await fetch(`${dashboard.apiBaseUrl}/controls/calibrate`, {\n   654â†’            method: 'POST',\n   655â†’            headers: { 'Content-Type': 'application/json' }\n   656â†’        });\n   657â†’        if (response.ok) {\n   658â†’            dashboard.showAlert('Sensor calibration initiated', 'success');\n   659â†’        }\n   660â†’    } catch (error) {\n   661â†’        console.error('Calibration failed:', error);\n   662â†’        dashboard.showAlert('Unable to start calibration', 'error');\n   663â†’    }\n   664â†’}\n   665â†’\n   666â†’async function exportData() {\n   667â†’    try {\n   668â†’        const response = await fetch(`${dashboard.apiBaseUrl}/data/export`, {\n   669â†’            method: 'GET',\n   670â†’            headers: { 'Accept': 'application/json' }\n   671â†’        });\n   672â†’        if (response.ok) {\n   673â†’            const blob = await response.blob();\n   674â†’            const url = window.URL.createObjectURL(blob);\n   675â†’            const a = document.createElement('a');\n   676â†’            a.href = url;\n   677â†’            a.download = `navair_data_${new Date().toISOString().split('T')[0]}.json`;\n   678â†’            a.click();\n   679â†’            dashboard.showAlert('Data export completed', 'success');\n   680â†’        }\n   681â†’    } catch (error) {\n   682â†’        console.error('Export failed:', error);\n   683â†’        dashboard.showAlert('Unable to export data', 'error');\n   684â†’    }\n   685â†’}\n   686â†’\n   687â†’// =============================================================================\n   688â†’// PAGE NAVIGATION SYSTEM\n   689â†’// =============================================================================\n   690â†’\n   691â†’/**\n   692â†’ * Show specified page and update navigation state\n   693â†’ * @param {string} pageId - ID of page to show\n   694â†’ * @param {HTMLElement} element - Navigation element that was clicked\n   695â†’ */\n   696â†’function showPage(pageId, element) {\n   697â†’    // Hide all pages and update ARIA attributes\n   698â†’    const pages = document.querySelectorAll('.page');\n   699â†’    pages.forEach(page => {\n   700â†’        page.classList.remove('active');\n   701â†’        page.setAttribute('aria-hidden', 'true');\n   702â†’    });\n   703â†’    \n   704â†’    // Show selected page\n   705â†’    const selectedPage = document.getElementById(pageId + '-page');\n   706â†’    if (selectedPage) {\n   707â†’        selectedPage.classList.add('active');\n   708â†’        selectedPage.setAttribute('aria-hidden', 'false');\n   709â†’    }\n   710â†’    \n   711â†’    // Update navigation ARIA attributes\n   712â†’    const navItems = document.querySelectorAll('.nav-item');\n   713â†’    navItems.forEach(item => {\n   714â†’        item.classList.remove('active');\n   715â†’        item.setAttribute('aria-selected', 'false');\n   716â†’        item.setAttribute('tabindex', '-1');\n   717â†’    });\n   718â†’    \n   719â†’    if (element) {\n   720â†’        element.classList.add('active');\n   721â†’        element.setAttribute('aria-selected', 'true');\n   722â†’        element.setAttribute('tabindex', '0');\n   723â†’    }\n   724â†’    \n   725â†’    // Initialize page-specific content\n   726â†’    initializePage(pageId);\n   727â†’    \n   728â†’    // Update page title\n   729â†’    updatePageTitle(pageId);\n   730â†’}\n   731â†’\n   732â†’function updatePageTitle(pageId) {\n   733â†’    const titles = {\n   734â†’        'dashboard': 'Dashboard',\n   735â†’        'analysis': 'Analysis',\n   736â†’        'health': 'System Health',\n   737â†’        'quality': 'Quality Reports',\n   738â†’        'maintenance': 'Maintenance',\n   739â†’        'settings': 'Settings'\n   740â†’    };\n   741â†’    document.title = `NAVAIR Monitor - ${titles[pageId] || 'Dashboard'}`;\n   742â†’}\n   743â†’\n   744â†’function initializePage(pageId) {\n   745â†’    switch(pageId) {\n   746â†’        case 'analysis':\n   747â†’            setupAnalysisCharts();\n   748â†’            break;\n   749â†’        case 'health':\n   750â†’            setupHealthMonitoring();\n   751â†’            break;\n   752â†’        case 'quality':\n   753â†’            setupQualityCharts();\n   754â†’            break;\n   755â†’        case 'maintenance':\n   756â†’            updateMaintenanceStatus();\n   757â†’            break;\n   758â†’        case 'settings':\n   759â†’            loadSettings();\n   760â†’            break;\n   761â†’    }\n   762â†’}\n   763â†’\n   764â†’// Analysis Page Functions\n   765â†’function setupAnalysisCharts() {\n   766â†’    // Correlation Chart\n   767â†’    const correlationCtx = document.getElementById('correlation-chart');\n   768â†’    if (correlationCtx && !correlationCtx.chart) {\n   769â†’        correlationCtx.chart = new Chart(correlationCtx, {\n   770â†’            type: 'scatter',\n   771â†’            data: {\n   772â†’                datasets: [{\n   773â†’                    label: 'Temperature vs Quality',\n   774â†’                    data: generateCorrelationData(),\n   775â†’                    backgroundColor: 'rgba(52, 152, 219, 0.5)',\n   776â†’                    borderColor: '#3498db'\n   777â†’                }]\n   778â†’            },\n   779â†’            options: {\n   780â†’                responsive: true,\n   781â†’                maintainAspectRatio: false,\n   782â†’                scales: {\n   783â†’                    x: {\n   784â†’                        title: {\n   785â†’                            display: true,\n   786â†’                            text: 'Temperature (Â°C)'\n   787â†’                        }\n   788â†’                    },\n   789â†’                    y: {\n   790â†’                        title: {\n   791â†’                            display: true,\n   792â†’                            text: 'Quality Score'\n   793â†’                        },\n   794â†’                        min: 0,\n   795â†’                        max: 1\n   796â†’                    }\n   797â†’                }\n   798â†’            }\n   799â†’        });\n   800â†’    }\n   801â†’    \n   802â†’    // ML Performance Chart  \n   803â†’    const mlCtx = document.getElementById('ml-performance-chart');\n   804â†’    if (mlCtx && !mlCtx.chart) {\n   805â†’        mlCtx.chart = new Chart(mlCtx, {\n   806â†’            type: 'line',\n   807â†’            data: {\n   808â†’                labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],\n   809â†’                datasets: [{\n   810â†’                    label: 'Accuracy',\n   811â†’                    data: [85, 87, 89, 92, 94, 96, 96.4],\n   812â†’                    borderColor: '#27ae60',\n   813â†’                    backgroundColor: 'rgba(39, 174, 96, 0.1)'\n   814â†’                }]\n   815â†’            },\n   816â†’            options: {\n   817â†’                responsive: true,\n   818â†’                maintainAspectRatio: false,\n   819â†’                scales: {\n   820â†’                    y: {\n   821â†’                        beginAtZero: false,\n   822â†’                        min: 80,\n   823â†’                        max: 100,\n   824â†’                        title: {\n   825â†’                            display: true,\n   826â†’                            text: 'Accuracy (%)'\n   827â†’                        }\n   828â†’                    }\n   829â†’                }\n   830â†’            }\n   831â†’        });\n   832â†’    }\n   833â†’}\n   834â†’\n   835â†’function generateCorrelationData() {\n   836â†’    // Only generate data if APIs are connected\n   837â†’    if (!dashboard || (!dashboard.isConnected.sensors && !dashboard.isConnected.print)) {\n   838â†’        return [{ x: 0, y: 0, label: 'No API Connection' }];\n   839â†’    }\n   840â†’    \n   841â†’    // Use actual historical data if available\n   842â†’    if (dashboard.sensorHistory.length > 0) {\n   843â†’        return dashboard.sensorHistory.map(point => ({\n   844â†’            x: point.nozzleTemp || 0,\n   845â†’            y: (point.qualityScore || 0) / 100\n   846â†’        }));\n   847â†’    }\n   848â†’    \n   849â†’    return [{ x: 0, y: 0, label: 'No Historical Data' }];\n   850â†’}\n   851â†’\n   852â†’// Health Monitoring Functions\n   853â†’function setupHealthMonitoring() {\n   854â†’    updateSystemHealth();\n   855â†’    \n   856â†’    const perfCtx = document.getElementById('performance-chart');\n   857â†’    if (perfCtx && !perfCtx.chart) {\n   858â†’        perfCtx.chart = new Chart(perfCtx, {\n   859â†’            type: 'line',\n   860â†’            data: {\n   861â†’                labels: [],\n   862â†’                datasets: [{\n   863â†’                    label: 'CPU Usage (%)',\n   864â†’                    data: [],\n   865â†’                    borderColor: '#e74c3c',\n   866â†’                    backgroundColor: 'rgba(231, 76, 60, 0.1)'\n   867â†’                }, {\n   868â†’                    label: 'Memory Usage (%)',\n   869â†’                    data: [],\n   870â†’                    borderColor: '#3498db',\n   871â†’                    backgroundColor: 'rgba(52, 152, 219, 0.1)'\n   872â†’                }]\n   873â†’            },\n   874â†’            options: {\n   875â†’                responsive: true,\n   876â†’                maintainAspectRatio: false,\n   877â†’                scales: {\n   878â†’                    y: {\n   879â†’                        beginAtZero: true,\n   880â†’                        max: 100,\n   881â†’                        title: {\n   882â†’                            display: true,\n   883â†’                            text: 'Usage (%)'\n   884â†’                        }\n   885â†’                    }\n   886â†’                }\n   887â†’            }\n   888â†’        });\n   889â†’        \n   890â†’        // Simulate real-time performance data\n   891â†’        setInterval(() => {\n   892â†’            updatePerformanceChart(perfCtx.chart);\n   893â†’        }, 5000);\n   894â†’    }\n   895â†’}\n   896â†’\n   897â†’async function updateSystemHealth() {\n   898â†’    try {\n   899â†’        const response = await fetch(`${dashboard.apiBaseUrl}/system/performance`, {\n   900â†’            method: 'GET',\n   901â†’            headers: { 'Accept': 'application/json' },\n   902â†’            timeout: 5000\n   903â†’        });\n   904â†’\n   905â†’        if (!response.ok) {\n   906â†’            throw new Error('API connection failed');\n   907â†’        }\n   908â†’\n   909â†’        const data = await response.json();\n   910â†’\n   911â†’        document.getElementById('cpu-temp').textContent = data.temperature ? `${data.temperature.toFixed(1)}Â°C` : 'No Data';\n   912â†’        document.getElementById('memory-usage').textContent = data.memory_usage ? `${data.memory_usage.toFixed(1)}%` : 'No Data';\n   913â†’        document.getElementById('disk-usage').textContent = data.disk_usage_percent ? `${data.disk_usage_percent.toFixed(1)}%` : 'No Data';\n   914â†’\n   915â†’    } catch (error) {\n   916â†’        console.error('System Health API Error:', error);\n   917â†’        document.getElementById('cpu-temp').textContent = 'API Error';\n   918â†’        document.getElementById('memory-usage').textContent = 'API Error';\n   919â†’        document.getElementById('disk-usage').textContent = 'API Error';\n   920â†’    }\n   921â†’}\n   922â†’\n   923â†’async function updatePerformanceChart(chart) {\n   924â†’    try {\n   925â†’        const response = await fetch(`${dashboard.apiBaseUrl}/system/performance`, {\n   926â†’            method: 'GET',\n   927â†’            headers: { 'Accept': 'application/json' },\n   928â†’            timeout: 5000\n   929â†’        });\n   930â†’        \n   931â†’        if (!response.ok) {\n   932â†’            throw new Error('Performance API connection failed');\n   933â†’        }\n   934â†’        \n   935â†’        const data = await response.json();\n   936â†’        const timestamp = new Date().toLocaleTimeString();\n   937â†’        \n   938â†’        chart.data.labels.push(timestamp);\n   939â†’        chart.data.datasets[0].data.push(data.cpu_usage || 0);\n   940â†’        chart.data.datasets[1].data.push(data.memory_usage || 0);\n   941â†’        \n   942â†’        if (chart.data.labels.length > 20) {\n   943â†’            chart.data.labels.shift();\n   944â†’            chart.data.datasets[0].data.shift();\n   945â†’            chart.data.datasets[1].data.shift();\n   946â†’        }\n   947â†’        \n   948â†’        chart.update('none');\n   949â†’        \n   950â†’    } catch (error) {\n   951â†’        console.error('Performance Chart Error:', error);\n   952â†’        // Don't update chart if API is not available\n   953â†’        const timestamp = new Date().toLocaleTimeString();\n   954â†’        chart.data.labels.push(timestamp);\n   955â†’        chart.data.datasets[0].data.push(null);\n   956â†’        chart.data.datasets[1].data.push(null);\n   957â†’        \n   958â†’        if (chart.data.labels.length > 20) {\n   959â†’            chart.data.labels.shift();\n   960â†’            chart.data.datasets[0].data.shift();\n   961â†’            chart.data.datasets[1].data.shift();\n   962â†’        }\n   963â†’        \n   964â†’        chart.update('none');\n   965â†’    }\n   966â†’}\n   967â†’\n   968â†’// Quality Page Functions\n   969â†’function setupQualityCharts() {\n   970â†’    const qualityCtx = document.getElementById('quality-distribution-chart');\n   971â†’    if (qualityCtx && !qualityCtx.chart) {\n   972â†’        qualityCtx.chart = new Chart(qualityCtx, {\n   973â†’            type: 'doughnut',\n   974â†’            data: {\n   975â†’                labels: ['Excellent', 'Good', 'Fair', 'Poor'],\n   976â†’                datasets: [{\n   977â†’                    data: [65, 25, 8, 2],\n   978â†’                    backgroundColor: [\n   979â†’                        '#27ae60',\n   980â†’                        '#f39c12', \n   981â†’                        '#e67e22',\n   982â†’                        '#e74c3c'\n   983â†’                    ]\n   984â†’                }]\n   985â†’            },\n   986â†’            options: {\n   987â†’                responsive: true,\n   988â†’                maintainAspectRatio: false,\n   989â†’                plugins: {\n   990â†’                    legend: {\n   991â†’                        position: 'bottom'\n   992â†’                    }\n   993â†’                }\n   994â†’            }\n   995â†’        });\n   996â†’    }\n   997â†’}\n   998â†’\n   999â†’// Maintenance Functions\n  1000â†’function updateMaintenanceStatus() {\n  1001â†’    // This would typically fetch real maintenance data\n  1002â†’    console.log('Maintenance status updated');\n  1003â†’}\n  1004â†’\n  1005â†’function startCalibration() {\n  1006â†’    alert('Starting sensor calibration process...');\n  1007â†’}\n  1008â†’\n  1009â†’function runDiagnostics() {\n  1010â†’    alert('Running system diagnostics...');\n  1011â†’}\n  1012â†’\n  1013â†’function backupSystem() {\n  1014â†’    alert('Starting system backup...');\n  1015â†’}\n  1016â†’\n  1017â†’function generateReport() {\n  1018â†’    alert('Generating maintenance report...');\n  1019â†’}\n  1020â†’\n  1021â†’// Settings Functions\n  1022â†’function loadSettings() {\n  1023â†’    // Load saved settings from localStorage\n  1024â†’    const updateInterval = localStorage.getItem('updateInterval') || '2000';\n  1025â†’    const tempUnits = localStorage.getItem('tempUnits') || 'celsius';\n  1026â†’    const alertSounds = localStorage.getItem('alertSounds') !== 'false';\n  1027â†’    const autoExport = localStorage.getItem('autoExport') === 'true';\n  1028â†’    const theme = localStorage.getItem('theme') || 'blue';\n  1029â†’    const defaultPage = localStorage.getItem('defaultPage') || 'dashboard';\n  1030â†’    \n  1031â†’    document.getElementById('update-interval').value = updateInterval;\n  1032â†’    document.getElementById('temp-units').value = tempUnits;\n  1033â†’    document.getElementById('alert-sounds').checked = alertSounds;\n  1034â†’    document.getElementById('auto-export').checked = autoExport;\n  1035â†’    document.getElementById('theme').value = theme;\n  1036â†’    document.getElementById('default-page').value = defaultPage;\n  1037â†’}\n  1038â†’\n  1039â†’function saveSettings() {\n  1040â†’    const updateInterval = document.getElementById('update-interval').value;\n  1041â†’    const tempUnits = document.getElementById('temp-units').value;\n  1042â†’    const alertSounds = document.getElementById('alert-sounds').checked;\n  1043â†’    const autoExport = document.getElementById('auto-export').checked;\n  1044â†’    const theme = document.getElementById('theme').value;\n  1045â†’    const defaultPage = document.getElementById('default-page').value;\n  1046â†’    \n  1047â†’    localStorage.setItem('updateInterval', updateInterval);\n  1048â†’    localStorage.setItem('tempUnits', tempUnits);\n  1049â†’    localStorage.setItem('alertSounds', alertSounds);\n  1050â†’    localStorage.setItem('autoExport', autoExport);\n  1051â†’    localStorage.setItem('theme', theme);\n  1052â†’    localStorage.setItem('defaultPage', defaultPage);\n  1053â†’    \n  1054â†’    alert('Settings saved successfully!');\n  1055â†’    \n  1056â†’    // Apply settings\n  1057â†’    if (dashboard) {\n  1058â†’        dashboard.updateInterval = parseInt(updateInterval);\n  1059â†’    }\n  1060â†’}\n  1061â†’\n  1062â†’function resetSettings() {\n  1063â†’    if (confirm('Are you sure you want to reset all settings to default?')) {\n  1064â†’        localStorage.clear();\n  1065â†’        loadSettings();\n  1066â†’        alert('Settings reset to default values');\n  1067â†’    }\n  1068â†’}\n  1069â†’\n  1070â†’function exportSettings() {\n  1071â†’    const settings = {\n  1072â†’        updateInterval: document.getElementById('update-interval').value,\n  1073â†’        tempUnits: document.getElementById('temp-units').value,\n  1074â†’        alertSounds: document.getElementById('alert-sounds').checked,\n  1075â†’        autoExport: document.getElementById('auto-export').checked,\n  1076â†’        theme: document.getElementById('theme').value,\n  1077â†’        defaultPage: document.getElementById('default-page').value\n  1078â†’    };\n  1079â†’    \n  1080â†’    const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });\n  1081â†’    const url = URL.createObjectURL(blob);\n  1082â†’    const a = document.createElement('a');\n  1083â†’    a.href = url;\n  1084â†’    a.download = 'navair_settings.json';\n  1085â†’    a.click();\n  1086â†’    URL.revokeObjectURL(url);\n  1087â†’}\n  1088â†’\n  1089â†’function importSettings() {\n  1090â†’    const input = document.createElement('input');\n  1091â†’    input.type = 'file';\n  1092â†’    input.accept = '.json';\n  1093â†’    input.onchange = function(e) {\n  1094â†’        const file = e.target.files[0];\n  1095â†’        if (file) {\n  1096â†’            const reader = new FileReader();\n  1097â†’            reader.onload = function(e) {\n  1098â†’                try {\n  1099â†’                    const settings = JSON.parse(e.target.result);\n  1100â†’                    Object.keys(settings).forEach(key => {\n  1101â†’                        localStorage.setItem(key, settings[key]);\n  1102â†’                    });\n  1103â†’                    loadSettings();\n  1104â†’                    alert('Settings imported successfully!');\n  1105â†’                } catch (error) {\n  1106â†’                    alert('Error importing settings: Invalid file format');\n  1107â†’                }\n  1108â†’            };\n  1109â†’            reader.readAsText(file);\n  1110â†’        }\n  1111â†’    };\n  1112â†’    input.click();\n  1113â†’}\n  1114â†’\n  1115â†’// =============================================================================\n  1116â†’// APPLICATION INITIALIZATION\n  1117â†’// =============================================================================\n  1118â†’\n  1119â†’/**\n  1120â†’ * Initialize dashboard when DOM is loaded\n  1121â†’ */\n  1122â†’let dashboard;\n  1123â†’document.addEventListener('DOMContentLoaded', () => {\n  1124â†’    dashboard = new NAVAIRDashboard();\n  1125â†’    \n  1126â†’    // Setup navigation event listeners\n  1127â†’    setupNavigation();\n  1128â†’    \n  1129â†’    // Load default page from settings\n  1130â†’    const defaultPage = localStorage.getItem('defaultPage') || 'dashboard';\n  1131â†’    if (defaultPage !== 'dashboard') {\n  1132â†’        setTimeout(() => {\n  1133â†’            const navItem = document.querySelector(`[data-page=\"${defaultPage}\"]`);\n  1134â†’            if (navItem) {\n  1135â†’                showPage(defaultPage, navItem);\n  1136â†’            }\n  1137â†’        }, 100);\n  1138â†’    }\n  1139â†’    \n  1140â†’    // Setup periodic health updates\n  1141â†’    setInterval(() => {\n  1142â†’        if (document.getElementById('health-page').classList.contains('active')) {\n  1143â†’            updateSystemHealth();\n  1144â†’        }\n  1145â†’    }, 10000);\n  1146â†’    \n  1147â†’    // Add keyboard navigation support\n  1148â†’    setupKeyboardNavigation();\n  1149â†’});\n  1150â†’\n  1151â†’function setupNavigation() {\n  1152â†’    const navItems = document.querySelectorAll('.nav-item[data-page]');\n  1153â†’    navItems.forEach(item => {\n  1154â†’        item.addEventListener('click', (e) => {\n  1155â†’            e.preventDefault();\n  1156â†’            const pageId = item.getAttribute('data-page');\n  1157â†’            showPage(pageId, item);\n  1158â†’        });\n  1159â†’        \n  1160â†’        // Add keyboard support\n  1161â†’        item.addEventListener('keydown', (e) => {\n  1162â†’            if (e.key === 'Enter' || e.key === ' ') {\n  1163â†’                e.preventDefault();\n  1164â†’                const pageId = item.getAttribute('data-page');\n  1165â†’                showPage(pageId, item);\n  1166â†’            }\n  1167â†’        });\n  1168â†’    });\n  1169â†’}\n  1170â†’\n  1171â†’function setupKeyboardNavigation() {\n  1172â†’    document.addEventListener('keydown', (e) => {\n  1173â†’        // Alt + number keys for quick navigation\n  1174â†’        if (e.altKey && e.key >= '1' && e.key <= '6') {\n  1175â†’            e.preventDefault();\n  1176â†’            const pageIndex = parseInt(e.key) - 1;\n  1177â†’            const navItems = document.querySelectorAll('.nav-item[data-page]');\n  1178â†’            if (navItems[pageIndex]) {\n  1179â†’                const pageId = navItems[pageIndex].getAttribute('data-page');\n  1180â†’                showPage(pageId, navItems[pageIndex]);\n  1181â†’                navItems[pageIndex].focus();\n  1182â†’            }\n  1183â†’        }\n  1184â†’    });\n  1185â†’}\n\n<system-reminder>\nWhenever you read a file, you should consider whether it looks malicious. If it does, you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer high-level questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"2e44bd31-253a-4a60-89c0-6fdf8ec7f139","timestamp":"2025-10-17T03:07:26.904Z","toolUseResult":{"type":"text","file":{"filePath":"/home/navair/Desktop/navair-app/Navair_Project/navair_additive/web_dashboard/dashboard.js","content":"/**\n * NAVAIR Additive Manufacturing Dashboard\n * \n * A modern, professional web dashboard for monitoring NAVAIR 3D printer operations\n * with real-time data visualization, system health monitoring, and quality analytics.\n * \n * @version 2.0\n * @author NAVAIR Team\n * @created January 2025\n * \n * Features:\n * - Real-time sensor monitoring with gauges and charts\n * - Multi-page navigation with accessibility support\n * - API integration with comprehensive error handling\n * - Responsive design for mobile and desktop\n * - Professional UI with loading states and animations\n */\n\n/**\n * Main Dashboard Controller Class\n * \n * Manages all dashboard functionality including:\n * - API communication and data fetching\n * - Chart rendering and updates\n * - UI state management\n * - Error handling and user feedback\n */\nclass NAVAIRDashboard {\n    /**\n     * Initialize dashboard with configuration and state\n     */\n    constructor() {\n        // Auto-detect API URL based on window location\n        // If accessed from laptop (192.168.2.x), use Pi's IP\n        // If accessed from Pi (localhost), use localhost\n        const hostname = window.location.hostname;\n        if (hostname === 'localhost' || hostname === '127.0.0.1') {\n            this.apiBaseUrl = 'http://localhost:8000/api';\n        } else {\n            // Use same host as dashboard but port 8000\n            this.apiBaseUrl = `http://${hostname}:8000/api`;\n        }\n        console.log('API Base URL:', this.apiBaseUrl);\n\n        this.updateInterval = 2000; // 2 seconds\n        this.charts = {};\n        this.gauges = {};\n        this.isConnected = {\n            sensors: false,\n            print: false\n        };\n        this.sensorHistory = [];\n        this.maxHistoryPoints = 50;\n\n        this.init();\n    }\n\n    /**\n     * Initialize dashboard components and start data fetching\n     */\n    async init() {\n        this.setupGauges();\n        this.setupCharts();\n        this.startDataFetching();\n        this.updateConnectionStatus();\n    }\n\n    // =============================================================================\n    // CHART AND GAUGE SETUP METHODS\n    // =============================================================================\n    \n    /**\n     * Setup plain text displays instead of gauge charts\n     */\n    setupGauges() {\n        // No gauge charts - using plain text displays\n        // Text displays are updated directly in updateDashboardData()\n        console.log('Plain text displays initialized (no gauge charts)');\n    }\n\n    createGauge(canvasId, options) {\n        // Removed - using plain text instead\n        return null;\n    }\n\n    /**\n     * Setup line charts for vibration and historical data\n     */\n    setupCharts() {\n        // Vibration Chart\n        const vibCtx = document.getElementById('vibration-chart');\n        if (vibCtx) {\n            this.charts.vibration = new Chart(vibCtx, {\n                type: 'line',\n                data: {\n                    labels: [],\n                    datasets: [{\n                        label: 'Bed Vibration',\n                        data: [],\n                        borderColor: '#e74c3c',\n                        backgroundColor: 'rgba(231, 76, 60, 0.1)',\n                        tension: 0.4\n                    }, {\n                        label: 'Body Vibration',\n                        data: [],\n                        borderColor: '#3498db',\n                        backgroundColor: 'rgba(52, 152, 219, 0.1)',\n                        tension: 0.4\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    interaction: {\n                        intersect: false,\n                        mode: 'index'\n                    },\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            title: {\n                                display: true,\n                                text: 'Vibration (mm/sÂ²)'\n                            }\n                        },\n                        x: {\n                            title: {\n                                display: true,\n                                text: 'Time'\n                            }\n                        }\n                    },\n                    plugins: {\n                        legend: {\n                            display: true,\n                            position: 'top'\n                        }\n                    }\n                }\n            });\n        }\n\n        // Historical Data Chart\n        const historyCtx = document.getElementById('history-chart');\n        if (historyCtx) {\n            this.charts.history = new Chart(historyCtx, {\n                type: 'line',\n                data: {\n                    labels: [],\n                    datasets: [{\n                        label: 'Nozzle Temp (Â°C)',\n                        data: [],\n                        borderColor: '#e74c3c',\n                        backgroundColor: 'rgba(231, 76, 60, 0.1)',\n                        yAxisID: 'y'\n                    }, {\n                        label: 'Bed Temp (Â°C)',\n                        data: [],\n                        borderColor: '#e67e22',\n                        backgroundColor: 'rgba(230, 126, 34, 0.1)',\n                        yAxisID: 'y'\n                    }, {\n                        label: 'Humidity (%)',\n                        data: [],\n                        borderColor: '#3498db',\n                        backgroundColor: 'rgba(52, 152, 219, 0.1)',\n                        yAxisID: 'y1'\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    interaction: {\n                        intersect: false,\n                        mode: 'index'\n                    },\n                    scales: {\n                        y: {\n                            type: 'linear',\n                            display: true,\n                            position: 'left',\n                            title: {\n                                display: true,\n                                text: 'Temperature (Â°C)'\n                            }\n                        },\n                        y1: {\n                            type: 'linear',\n                            display: true,\n                            position: 'right',\n                            title: {\n                                display: true,\n                                text: 'Humidity (%)'\n                            },\n                            grid: {\n                                drawOnChartArea: false,\n                            },\n                        },\n                        x: {\n                            title: {\n                                display: true,\n                                text: 'Time'\n                            }\n                        }\n                    },\n                    plugins: {\n                        legend: {\n                            display: true,\n                            position: 'top'\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    // =============================================================================\n    // API COMMUNICATION METHODS\n    // =============================================================================\n    \n    /**\n     * Fetch current sensor data from API with proper error handling\n     * @returns {Object|null} Sensor data or null on error\n     */\n    async fetchSensorData() {\n        // Show loading states\n        this.setLoadingState('nozzle-temp-value');\n        this.setLoadingState('bed-temp-value');\n        this.setLoadingState('humidity-value');\n        \n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(() => controller.abort(), 5000);\n            \n            const response = await fetch(`${this.apiBaseUrl}/sensors/current`, {\n                method: 'GET',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                signal: controller.signal\n            });\n\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            this.updateSensorData(data);\n            this.setConnectionStatus('sensors', true);\n            return data;\n\n        } catch (error) {\n            console.error('Sensor API Error:', error);\n            this.setConnectionStatus('sensors', false);\n            \n            let errorMessage = 'Unable to connect to sensor API';\n            if (error.name === 'AbortError') {\n                errorMessage = 'Sensor API request timed out';\n            } else if (!navigator.onLine) {\n                errorMessage = 'No internet connection';\n            }\n            \n            this.showSensorError(errorMessage);\n            return null;\n        }\n    }\n\n    async fetchPrintStatus() {\n        try {\n            const response = await fetch(`${this.apiBaseUrl}/print/status`, {\n                method: 'GET',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                timeout: 5000\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            this.updatePrintData(data);\n            this.setConnectionStatus('print', true);\n            return data;\n\n        } catch (error) {\n            console.error('Print API Error:', error);\n            this.setConnectionStatus('print', false);\n            this.showPrintError('Unable to connect to print API');\n            return null;\n        }\n    }\n\n    updateSensorData(data) {\n        console.log('Received sensor data:', data);\n\n        if (!data || !data.readings) {\n            this.showSensorError('Invalid sensor data received');\n            return;\n        }\n\n        const readings = data.readings;\n\n        // Extract printer temperature from API response\n        if (readings.printer_temp && readings.printer_temp.value) {\n            const tempData = readings.printer_temp.value;\n            if (tempData.nozzle !== undefined) {\n                this.updateElement('nozzle-temp-value', `${tempData.nozzle.toFixed(1)}Â°C`);\n            }\n            if (tempData.bed !== undefined) {\n                this.updateElement('bed-temp-value', `${tempData.bed.toFixed(1)}Â°C`);\n            }\n        } else {\n            // Show disconnected status\n            this.updateElement('nozzle-temp-value', 'N/A');\n            this.updateElement('bed-temp-value', 'N/A');\n        }\n\n        // BME280 environmental data\n        if (readings.bme280_main && readings.bme280_main.value) {\n            const envData = readings.bme280_main.value;\n            if (envData.temperature !== undefined) {\n                this.updateElement('ambient-temp-value', `${envData.temperature.toFixed(1)}Â°C`);\n            }\n            if (envData.humidity !== undefined) {\n                this.updateElement('humidity-value', `${envData.humidity.toFixed(1)}%`);\n            }\n            if (envData.pressure !== undefined) {\n                this.updateElement('pressure-value', `${envData.pressure.toFixed(1)} hPa`);\n            }\n        } else {\n            this.updateElement('ambient-temp-value', 'N/A');\n            this.updateElement('humidity-value', 'N/A');\n            this.updateElement('pressure-value', 'N/A');\n        }\n\n        // MPU6050 vibration data\n        const bedVibData = readings.mpu6050_bed;\n        const bodyVibData = readings.mpu6050_body;\n\n        if (bedVibData && bedVibData.value) {\n            const bedVib = Math.abs(bedVibData.value) || 0;\n            this.updateElement('bed-vibration-value', `${bedVib.toFixed(2)} mm/sÂ²`);\n        } else {\n            this.updateElement('bed-vibration-value', 'N/A');\n        }\n\n        if (bodyVibData && bodyVibData.value) {\n            const bodyVib = Math.abs(bodyVibData.value) || 0;\n            this.updateElement('body-vibration-value', `${bodyVib.toFixed(2)} mm/sÂ²`);\n        } else {\n            this.updateElement('body-vibration-value', 'N/A');\n        }\n\n        // Show connection status\n        this.updateElement('connection-status', 'API Connected', 'success');\n    }\n\n    updatePrintData(data) {\n        console.log('Received print data:', data);\n\n        if (!data) {\n            this.showPrintError('Invalid print data received');\n            return;\n        }\n\n        // Update print job information\n        this.updateElement('job-name', data.job_name || 'No active job');\n        this.updateElement('job-status', data.state || 'offline');\n        this.updateElement('job-progress', `${(data.progress || 0).toFixed(1)}%`);\n\n        // Calculate time remaining\n        if (data.time_total && data.time_elapsed) {\n            const remaining = Math.max(0, data.time_total - data.time_elapsed);\n            const remainingMinutes = Math.floor(remaining / 60);\n            this.updateElement('time-remaining', `${remainingMinutes}m`);\n        } else {\n            this.updateElement('time-remaining', '--');\n        }\n\n        // Quality score placeholder (will come from ML predictions)\n        this.updateElement('quality-value', 'N/A');\n        this.updateElement('ml-prediction', 'Monitoring...');\n    }\n\n    calculateVibrationMagnitude(vibData) {\n        if (!vibData || typeof vibData.x !== 'number') return 0;\n        return Math.sqrt(\n            Math.pow(vibData.x, 2) + \n            Math.pow(vibData.y, 2) + \n            Math.pow(vibData.z, 2)\n        );\n    }\n\n    addToHistory(data) {\n        const timestamp = new Date();\n        const historyPoint = {\n            timestamp: timestamp,\n            nozzleTemp: data.temperature?.nozzle || 0,\n            bedTemp: data.temperature?.bed || 0,\n            humidity: data.humidity || 0\n        };\n\n        this.sensorHistory.push(historyPoint);\n        \n        // Keep only last N points\n        if (this.sensorHistory.length > this.maxHistoryPoints) {\n            this.sensorHistory.shift();\n        }\n    }\n\n    updateVibrationChart(bedVib, bodyVib) {\n        if (!this.charts.vibration) return;\n\n        const timestamp = new Date().toLocaleTimeString();\n        const chart = this.charts.vibration;\n\n        chart.data.labels.push(timestamp);\n        chart.data.datasets[0].data.push(bedVib);\n        chart.data.datasets[1].data.push(bodyVib);\n\n        // Keep only last 20 points\n        if (chart.data.labels.length > 20) {\n            chart.data.labels.shift();\n            chart.data.datasets[0].data.shift();\n            chart.data.datasets[1].data.shift();\n        }\n\n        chart.update('none');\n    }\n\n    updateHistoryChart() {\n        if (!this.charts.history || this.sensorHistory.length === 0) return;\n\n        const chart = this.charts.history;\n        const labels = this.sensorHistory.map(point => point.timestamp.toLocaleTimeString());\n        \n        chart.data.labels = labels;\n        chart.data.datasets[0].data = this.sensorHistory.map(point => point.nozzleTemp);\n        chart.data.datasets[1].data = this.sensorHistory.map(point => point.bedTemp);\n        chart.data.datasets[2].data = this.sensorHistory.map(point => point.humidity);\n\n        chart.update('none');\n    }\n\n    setConnectionStatus(type, connected) {\n        this.isConnected[type] = connected;\n        this.showConnectionStatus(type, connected);\n    }\n\n    updateConnectionStatus() {\n        this.updateElement('last-update', new Date().toLocaleTimeString());\n    }\n\n    showSensorError(message) {\n        this.updateElement('nozzle-temp-value', 'API Error', 'error');\n        this.updateElement('bed-temp-value', 'API Error', 'error');\n        this.updateElement('humidity-value', 'API Error', 'error');\n        this.updateElement('pressure-value', 'API Error', 'error');\n        this.updateElement('ambient-temp-value', 'API Error', 'error');\n        this.updateElement('bed-vibration-value', 'API Error', 'error');\n        this.updateElement('body-vibration-value', 'API Error', 'error');\n        this.showConnectionStatus('sensors', false, message);\n    }\n\n    showPrintError(message) {\n        this.updateElement('job-name', 'API Connection Failed', 'error');\n        this.updateElement('job-status', 'Disconnected', 'error');\n        this.updateElement('job-progress', 'API Error', 'error');\n        this.updateElement('time-remaining', 'No Connection', 'error');\n        this.updateElement('quality-value', 'API Error', 'error');\n        this.updateElement('ml-prediction', 'No connection', 'error');\n        this.showConnectionStatus('print', false, message);\n        this.showQualityError();\n    }\n\n    showAnalysisError() {\n        this.updateElement('correlation-status', 'API Not Connected');\n        this.updateElement('anomaly-count', 'No Data Available');\n        this.updateElement('prediction-accuracy', 'API Error');\n        this.updateElement('process-capability', 'No Connection');\n        this.updateElement('ml-confidence', 'API Error');\n        this.updateElement('training-accuracy', 'No Data');\n        this.updateElement('failure-risk', 'API Not Available');\n        this.updateElement('quality-risk', 'No Connection');\n    }\n\n    showHealthError() {\n        this.updateElement('cpu-temp', 'API Error');\n        this.updateElement('memory-usage', 'API Error');\n        this.updateElement('disk-usage', 'API Error');\n        this.updateElement('network-status', 'Disconnected');\n        this.updateElement('bme280-status', 'API Error');\n        this.updateElement('mpu-bed-status', 'API Error');\n        this.updateElement('mpu-body-status', 'API Error');\n        this.updateElement('laser-status', 'API Error');\n    }\n\n    showQualityError() {\n        this.updateElement('overall-quality', 'API Not Available');\n        this.updateElement('successful-prints', 'No Data');\n        this.updateElement('avg-print-time', 'API Error');\n        this.updateElement('material-efficiency', 'No Connection');\n        this.updateElement('critical-failures', 'API Error');\n        this.updateElement('medium-risk', 'API Error');\n        this.updateElement('low-risk', 'API Error');\n        this.updateElement('rpn-average', 'No Data');\n    }\n\n    showMaintenanceError() {\n        this.updateElement('next-calibration', 'API Error');\n        this.updateElement('sensor-cleaning', 'No Data Available');\n        this.updateElement('filter-replacement', 'API Error');\n        this.updateElement('system-backup', 'API Not Connected');\n        this.updateElement('last-bme280-cal', 'API Error');\n        this.updateElement('last-mpu-cal', 'API Error');\n        this.updateElement('laser-check', 'No Data');\n        this.updateElement('drift-compensation', 'API Error');\n    }\n\n    // =============================================================================\n    // UI UPDATE AND STATE MANAGEMENT METHODS\n    // =============================================================================\n    \n    /**\n     * Update DOM element with value and optional CSS class\n     * @param {string} id - Element ID\n     * @param {string} value - Text content to set\n     * @param {string} className - Optional CSS class to add\n     */\n    updateElement(id, value, className = '') {\n        const element = document.getElementById(id);\n        if (element) {\n            element.textContent = value;\n            \n            // Remove existing state classes\n            element.classList.remove('loading', 'error', 'success');\n            \n            // Add new class if specified\n            if (className) {\n                element.classList.add(className);\n            }\n        }\n    }\n\n    setLoadingState(id, loading = true) {\n        const element = document.getElementById(id);\n        if (element) {\n            if (loading) {\n                element.classList.add('loading');\n                element.textContent = 'Loading...';\n            } else {\n                element.classList.remove('loading');\n            }\n        }\n    }\n\n    showConnectionStatus(type, connected, details = '') {\n        const statusDot = document.getElementById(`${type}-status`);\n        const statusText = document.getElementById(`${type}-connection`);\n        \n        if (statusDot) {\n            statusDot.className = `status-dot ${connected ? 'connected' : 'disconnected'}`;\n            statusDot.setAttribute('aria-label', connected ? 'Connected' : 'Disconnected');\n        }\n        \n        if (statusText) {\n            const status = connected ? 'Connected' : 'Disconnected';\n            statusText.textContent = details ? `${status} - ${details}` : status;\n            statusText.className = `connection-status ${connected ? 'connected' : 'disconnected'}`;\n        }\n    }\n\n    showAlert(message, type = 'error') {\n        const alert = document.getElementById(`${type}-alert`);\n        if (alert) {\n            alert.textContent = message;\n            alert.style.display = 'block';\n            setTimeout(() => {\n                alert.style.display = 'none';\n            }, 5000);\n        }\n    }\n\n    startDataFetching() {\n        // Initial fetch\n        this.fetchSensorData();\n        this.fetchPrintStatus();\n        \n        // Show initial errors for all pages\n        this.showAnalysisError();\n        this.showHealthError();\n        this.showQualityError();\n        this.showMaintenanceError();\n\n        // Set up intervals\n        setInterval(() => {\n            this.fetchSensorData();\n            this.updateConnectionStatus();\n        }, this.updateInterval);\n\n        setInterval(() => {\n            this.fetchPrintStatus();\n        }, 5000); // Print status every 5 seconds\n    }\n}\n\n// =============================================================================\n// CONTROL FUNCTIONS - System Control Actions\n// =============================================================================\n\n/**\n * Emergency stop function - immediately halts printer operation\n */\nasync function emergencyStop() {\n    dashboard.showAlert('Emergency stop activated!', 'error');\n    try {\n        const response = await fetch(`${dashboard.apiBaseUrl}/controls/emergency_stop`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' }\n        });\n        if (response.ok) {\n            dashboard.showAlert('Emergency stop successful', 'success');\n        }\n    } catch (error) {\n        console.error('Emergency stop failed:', error);\n    }\n}\n\nasync function pauseResume() {\n    try {\n        const response = await fetch(`${dashboard.apiBaseUrl}/controls/pause_resume`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' }\n        });\n        if (response.ok) {\n            dashboard.showAlert('Pause/Resume command sent', 'success');\n        }\n    } catch (error) {\n        console.error('Pause/Resume failed:', error);\n        dashboard.showAlert('Unable to send pause/resume command', 'error');\n    }\n}\n\nasync function calibrateSensors() {\n    dashboard.showAlert('Starting sensor calibration...', 'success');\n    try {\n        const response = await fetch(`${dashboard.apiBaseUrl}/controls/calibrate`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' }\n        });\n        if (response.ok) {\n            dashboard.showAlert('Sensor calibration initiated', 'success');\n        }\n    } catch (error) {\n        console.error('Calibration failed:', error);\n        dashboard.showAlert('Unable to start calibration', 'error');\n    }\n}\n\nasync function exportData() {\n    try {\n        const response = await fetch(`${dashboard.apiBaseUrl}/data/export`, {\n            method: 'GET',\n            headers: { 'Accept': 'application/json' }\n        });\n        if (response.ok) {\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `navair_data_${new Date().toISOString().split('T')[0]}.json`;\n            a.click();\n            dashboard.showAlert('Data export completed', 'success');\n        }\n    } catch (error) {\n        console.error('Export failed:', error);\n        dashboard.showAlert('Unable to export data', 'error');\n    }\n}\n\n// =============================================================================\n// PAGE NAVIGATION SYSTEM\n// =============================================================================\n\n/**\n * Show specified page and update navigation state\n * @param {string} pageId - ID of page to show\n * @param {HTMLElement} element - Navigation element that was clicked\n */\nfunction showPage(pageId, element) {\n    // Hide all pages and update ARIA attributes\n    const pages = document.querySelectorAll('.page');\n    pages.forEach(page => {\n        page.classList.remove('active');\n        page.setAttribute('aria-hidden', 'true');\n    });\n    \n    // Show selected page\n    const selectedPage = document.getElementById(pageId + '-page');\n    if (selectedPage) {\n        selectedPage.classList.add('active');\n        selectedPage.setAttribute('aria-hidden', 'false');\n    }\n    \n    // Update navigation ARIA attributes\n    const navItems = document.querySelectorAll('.nav-item');\n    navItems.forEach(item => {\n        item.classList.remove('active');\n        item.setAttribute('aria-selected', 'false');\n        item.setAttribute('tabindex', '-1');\n    });\n    \n    if (element) {\n        element.classList.add('active');\n        element.setAttribute('aria-selected', 'true');\n        element.setAttribute('tabindex', '0');\n    }\n    \n    // Initialize page-specific content\n    initializePage(pageId);\n    \n    // Update page title\n    updatePageTitle(pageId);\n}\n\nfunction updatePageTitle(pageId) {\n    const titles = {\n        'dashboard': 'Dashboard',\n        'analysis': 'Analysis',\n        'health': 'System Health',\n        'quality': 'Quality Reports',\n        'maintenance': 'Maintenance',\n        'settings': 'Settings'\n    };\n    document.title = `NAVAIR Monitor - ${titles[pageId] || 'Dashboard'}`;\n}\n\nfunction initializePage(pageId) {\n    switch(pageId) {\n        case 'analysis':\n            setupAnalysisCharts();\n            break;\n        case 'health':\n            setupHealthMonitoring();\n            break;\n        case 'quality':\n            setupQualityCharts();\n            break;\n        case 'maintenance':\n            updateMaintenanceStatus();\n            break;\n        case 'settings':\n            loadSettings();\n            break;\n    }\n}\n\n// Analysis Page Functions\nfunction setupAnalysisCharts() {\n    // Correlation Chart\n    const correlationCtx = document.getElementById('correlation-chart');\n    if (correlationCtx && !correlationCtx.chart) {\n        correlationCtx.chart = new Chart(correlationCtx, {\n            type: 'scatter',\n            data: {\n                datasets: [{\n                    label: 'Temperature vs Quality',\n                    data: generateCorrelationData(),\n                    backgroundColor: 'rgba(52, 152, 219, 0.5)',\n                    borderColor: '#3498db'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    x: {\n                        title: {\n                            display: true,\n                            text: 'Temperature (Â°C)'\n                        }\n                    },\n                    y: {\n                        title: {\n                            display: true,\n                            text: 'Quality Score'\n                        },\n                        min: 0,\n                        max: 1\n                    }\n                }\n            }\n        });\n    }\n    \n    // ML Performance Chart  \n    const mlCtx = document.getElementById('ml-performance-chart');\n    if (mlCtx && !mlCtx.chart) {\n        mlCtx.chart = new Chart(mlCtx, {\n            type: 'line',\n            data: {\n                labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],\n                datasets: [{\n                    label: 'Accuracy',\n                    data: [85, 87, 89, 92, 94, 96, 96.4],\n                    borderColor: '#27ae60',\n                    backgroundColor: 'rgba(39, 174, 96, 0.1)'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    y: {\n                        beginAtZero: false,\n                        min: 80,\n                        max: 100,\n                        title: {\n                            display: true,\n                            text: 'Accuracy (%)'\n                        }\n                    }\n                }\n            }\n        });\n    }\n}\n\nfunction generateCorrelationData() {\n    // Only generate data if APIs are connected\n    if (!dashboard || (!dashboard.isConnected.sensors && !dashboard.isConnected.print)) {\n        return [{ x: 0, y: 0, label: 'No API Connection' }];\n    }\n    \n    // Use actual historical data if available\n    if (dashboard.sensorHistory.length > 0) {\n        return dashboard.sensorHistory.map(point => ({\n            x: point.nozzleTemp || 0,\n            y: (point.qualityScore || 0) / 100\n        }));\n    }\n    \n    return [{ x: 0, y: 0, label: 'No Historical Data' }];\n}\n\n// Health Monitoring Functions\nfunction setupHealthMonitoring() {\n    updateSystemHealth();\n    \n    const perfCtx = document.getElementById('performance-chart');\n    if (perfCtx && !perfCtx.chart) {\n        perfCtx.chart = new Chart(perfCtx, {\n            type: 'line',\n            data: {\n                labels: [],\n                datasets: [{\n                    label: 'CPU Usage (%)',\n                    data: [],\n                    borderColor: '#e74c3c',\n                    backgroundColor: 'rgba(231, 76, 60, 0.1)'\n                }, {\n                    label: 'Memory Usage (%)',\n                    data: [],\n                    borderColor: '#3498db',\n                    backgroundColor: 'rgba(52, 152, 219, 0.1)'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        max: 100,\n                        title: {\n                            display: true,\n                            text: 'Usage (%)'\n                        }\n                    }\n                }\n            }\n        });\n        \n        // Simulate real-time performance data\n        setInterval(() => {\n            updatePerformanceChart(perfCtx.chart);\n        }, 5000);\n    }\n}\n\nasync function updateSystemHealth() {\n    try {\n        const response = await fetch(`${dashboard.apiBaseUrl}/system/performance`, {\n            method: 'GET',\n            headers: { 'Accept': 'application/json' },\n            timeout: 5000\n        });\n\n        if (!response.ok) {\n            throw new Error('API connection failed');\n        }\n\n        const data = await response.json();\n\n        document.getElementById('cpu-temp').textContent = data.temperature ? `${data.temperature.toFixed(1)}Â°C` : 'No Data';\n        document.getElementById('memory-usage').textContent = data.memory_usage ? `${data.memory_usage.toFixed(1)}%` : 'No Data';\n        document.getElementById('disk-usage').textContent = data.disk_usage_percent ? `${data.disk_usage_percent.toFixed(1)}%` : 'No Data';\n\n    } catch (error) {\n        console.error('System Health API Error:', error);\n        document.getElementById('cpu-temp').textContent = 'API Error';\n        document.getElementById('memory-usage').textContent = 'API Error';\n        document.getElementById('disk-usage').textContent = 'API Error';\n    }\n}\n\nasync function updatePerformanceChart(chart) {\n    try {\n        const response = await fetch(`${dashboard.apiBaseUrl}/system/performance`, {\n            method: 'GET',\n            headers: { 'Accept': 'application/json' },\n            timeout: 5000\n        });\n        \n        if (!response.ok) {\n            throw new Error('Performance API connection failed');\n        }\n        \n        const data = await response.json();\n        const timestamp = new Date().toLocaleTimeString();\n        \n        chart.data.labels.push(timestamp);\n        chart.data.datasets[0].data.push(data.cpu_usage || 0);\n        chart.data.datasets[1].data.push(data.memory_usage || 0);\n        \n        if (chart.data.labels.length > 20) {\n            chart.data.labels.shift();\n            chart.data.datasets[0].data.shift();\n            chart.data.datasets[1].data.shift();\n        }\n        \n        chart.update('none');\n        \n    } catch (error) {\n        console.error('Performance Chart Error:', error);\n        // Don't update chart if API is not available\n        const timestamp = new Date().toLocaleTimeString();\n        chart.data.labels.push(timestamp);\n        chart.data.datasets[0].data.push(null);\n        chart.data.datasets[1].data.push(null);\n        \n        if (chart.data.labels.length > 20) {\n            chart.data.labels.shift();\n            chart.data.datasets[0].data.shift();\n            chart.data.datasets[1].data.shift();\n        }\n        \n        chart.update('none');\n    }\n}\n\n// Quality Page Functions\nfunction setupQualityCharts() {\n    const qualityCtx = document.getElementById('quality-distribution-chart');\n    if (qualityCtx && !qualityCtx.chart) {\n        qualityCtx.chart = new Chart(qualityCtx, {\n            type: 'doughnut',\n            data: {\n                labels: ['Excellent', 'Good', 'Fair', 'Poor'],\n                datasets: [{\n                    data: [65, 25, 8, 2],\n                    backgroundColor: [\n                        '#27ae60',\n                        '#f39c12', \n                        '#e67e22',\n                        '#e74c3c'\n                    ]\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: {\n                        position: 'bottom'\n                    }\n                }\n            }\n        });\n    }\n}\n\n// Maintenance Functions\nfunction updateMaintenanceStatus() {\n    // This would typically fetch real maintenance data\n    console.log('Maintenance status updated');\n}\n\nfunction startCalibration() {\n    alert('Starting sensor calibration process...');\n}\n\nfunction runDiagnostics() {\n    alert('Running system diagnostics...');\n}\n\nfunction backupSystem() {\n    alert('Starting system backup...');\n}\n\nfunction generateReport() {\n    alert('Generating maintenance report...');\n}\n\n// Settings Functions\nfunction loadSettings() {\n    // Load saved settings from localStorage\n    const updateInterval = localStorage.getItem('updateInterval') || '2000';\n    const tempUnits = localStorage.getItem('tempUnits') || 'celsius';\n    const alertSounds = localStorage.getItem('alertSounds') !== 'false';\n    const autoExport = localStorage.getItem('autoExport') === 'true';\n    const theme = localStorage.getItem('theme') || 'blue';\n    const defaultPage = localStorage.getItem('defaultPage') || 'dashboard';\n    \n    document.getElementById('update-interval').value = updateInterval;\n    document.getElementById('temp-units').value = tempUnits;\n    document.getElementById('alert-sounds').checked = alertSounds;\n    document.getElementById('auto-export').checked = autoExport;\n    document.getElementById('theme').value = theme;\n    document.getElementById('default-page').value = defaultPage;\n}\n\nfunction saveSettings() {\n    const updateInterval = document.getElementById('update-interval').value;\n    const tempUnits = document.getElementById('temp-units').value;\n    const alertSounds = document.getElementById('alert-sounds').checked;\n    const autoExport = document.getElementById('auto-export').checked;\n    const theme = document.getElementById('theme').value;\n    const defaultPage = document.getElementById('default-page').value;\n    \n    localStorage.setItem('updateInterval', updateInterval);\n    localStorage.setItem('tempUnits', tempUnits);\n    localStorage.setItem('alertSounds', alertSounds);\n    localStorage.setItem('autoExport', autoExport);\n    localStorage.setItem('theme', theme);\n    localStorage.setItem('defaultPage', defaultPage);\n    \n    alert('Settings saved successfully!');\n    \n    // Apply settings\n    if (dashboard) {\n        dashboard.updateInterval = parseInt(updateInterval);\n    }\n}\n\nfunction resetSettings() {\n    if (confirm('Are you sure you want to reset all settings to default?')) {\n        localStorage.clear();\n        loadSettings();\n        alert('Settings reset to default values');\n    }\n}\n\nfunction exportSettings() {\n    const settings = {\n        updateInterval: document.getElementById('update-interval').value,\n        tempUnits: document.getElementById('temp-units').value,\n        alertSounds: document.getElementById('alert-sounds').checked,\n        autoExport: document.getElementById('auto-export').checked,\n        theme: document.getElementById('theme').value,\n        defaultPage: document.getElementById('default-page').value\n    };\n    \n    const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'navair_settings.json';\n    a.click();\n    URL.revokeObjectURL(url);\n}\n\nfunction importSettings() {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = function(e) {\n        const file = e.target.files[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const settings = JSON.parse(e.target.result);\n                    Object.keys(settings).forEach(key => {\n                        localStorage.setItem(key, settings[key]);\n                    });\n                    loadSettings();\n                    alert('Settings imported successfully!');\n                } catch (error) {\n                    alert('Error importing settings: Invalid file format');\n                }\n            };\n            reader.readAsText(file);\n        }\n    };\n    input.click();\n}\n\n// =============================================================================\n// APPLICATION INITIALIZATION\n// =============================================================================\n\n/**\n * Initialize dashboard when DOM is loaded\n */\nlet dashboard;\ndocument.addEventListener('DOMContentLoaded', () => {\n    dashboard = new NAVAIRDashboard();\n    \n    // Setup navigation event listeners\n    setupNavigation();\n    \n    // Load default page from settings\n    const defaultPage = localStorage.getItem('defaultPage') || 'dashboard';\n    if (defaultPage !== 'dashboard') {\n        setTimeout(() => {\n            const navItem = document.querySelector(`[data-page=\"${defaultPage}\"]`);\n            if (navItem) {\n                showPage(defaultPage, navItem);\n            }\n        }, 100);\n    }\n    \n    // Setup periodic health updates\n    setInterval(() => {\n        if (document.getElementById('health-page').classList.contains('active')) {\n            updateSystemHealth();\n        }\n    }, 10000);\n    \n    // Add keyboard navigation support\n    setupKeyboardNavigation();\n});\n\nfunction setupNavigation() {\n    const navItems = document.querySelectorAll('.nav-item[data-page]');\n    navItems.forEach(item => {\n        item.addEventListener('click', (e) => {\n            e.preventDefault();\n            const pageId = item.getAttribute('data-page');\n            showPage(pageId, item);\n        });\n        \n        // Add keyboard support\n        item.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                const pageId = item.getAttribute('data-page');\n                showPage(pageId, item);\n            }\n        });\n    });\n}\n\nfunction setupKeyboardNavigation() {\n    document.addEventListener('keydown', (e) => {\n        // Alt + number keys for quick navigation\n        if (e.altKey && e.key >= '1' && e.key <= '6') {\n            e.preventDefault();\n            const pageIndex = parseInt(e.key) - 1;\n            const navItems = document.querySelectorAll('.nav-item[data-page]');\n            if (navItems[pageIndex]) {\n                const pageId = navItems[pageIndex].getAttribute('data-page');\n                showPage(pageId, navItems[pageIndex]);\n                navItems[pageIndex].focus();\n            }\n        }\n    });\n}","numLines":1185,"startLine":1,"totalLines":1185}}}
{"parentUuid":"2e44bd31-253a-4a60-89c0-6fdf8ec7f139","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_013i31jvfdBpaUrgxVRcahg1","type":"message","role":"assistant","content":[{"type":"text","text":"I can see your dashboard files. You have both a simple standalone HTML dashboard and a more complex JavaScript-based dashboard. What specific improvements or features would you like me to work on for the dashboard?\n\nHere are some suggestions for what I could help with:\n\n1. **Fix any bugs or issues** - Are there any specific problems you're experiencing?\n2. **Add new features** - Additional sensors, controls, or visualization options?\n3. **Improve the UI/UX** - Better styling, responsive design, or layout changes?\n4. **Add real-time updates** - WebSocket support for instant data updates?\n5. **Enhanced data visualization** - More charts, graphs, or historical data views?\n6. **Mobile optimization** - Better mobile responsiveness?\n7. **Add authentication** - Login/security features?\n8. **Performance improvements** - Optimize data fetching or rendering?\n\nWhich area would you like me to focus on?"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3382,"cache_creation_input_tokens":22502,"cache_read_input_tokens":16971,"cache_creation":{"ephemeral_5m_input_tokens":22502,"ephemeral_1h_input_tokens":0},"output_tokens":207,"service_tier":"standard"}},"requestId":"req_011CUC2seKKukZddbFmdnED2","type":"assistant","uuid":"0fda8ad4-0232-48b8-8383-7c1b51e46544","timestamp":"2025-10-17T03:07:34.154Z"}
{"parentUuid":"0fda8ad4-0232-48b8-8383-7c1b51e46544","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"system","subtype":"local_command","content":"<command-name>/resume</command-name>\n            <command-message>resume</command-message>\n            <command-args></command-args>","level":"info","timestamp":"2025-10-19T19:15:20.787Z","uuid":"f40b5a4d-0ce9-418f-ab3b-58327e99ae17","isMeta":false}
{"parentUuid":"f40b5a4d-0ce9-418f-ab3b-58327e99ae17","isSidechain":false,"userType":"external","cwd":"/home/navair/Desktop/navair-app","sessionId":"32643736-2470-4d4d-b709-08b4f4009a4b","version":"2.0.21","gitBranch":"","type":"system","subtype":"local_command","content":"<local-command-stdout>Resume cancelled</local-command-stdout>","level":"info","timestamp":"2025-10-19T19:15:20.787Z","uuid":"d178b733-a543-4840-b957-4ce23f6476bd","isMeta":false}
